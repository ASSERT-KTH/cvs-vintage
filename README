			Jakarta Tomcat Servlet Container
			================================


INSTALLING AND BUILDING TOMCAT
------------------------------

This subproject contains the source code for the Tomcat servlet container and
JSP engine that conforms to the latest public versions of the Servlet and JSP
APIs.  In order to build these sources successfully, you must do the following:

* Download and install the Java API for XML Parsing implementation (current
  version number is 1.0) from <http://java.sun.com/xml>.  Make sure that the
  "jaxp.jar" and "parser.jar" files are on your class path.

* Download and install the JAKARTA-ANT distribution.  If you have downloaded
  the source distribution, you must create the executable version by
  executing the following commands:

	cd jakarta-ant
	./bootstrap.sh		<-- Unix
	bootstrap		<-- Windows

  This should result in the creation of a file "ant.jar" in the "lib"
  subdirectory, which will be used when building the Servlet API distribution.

* Download and install the JAKARTA-SERVLETAPI distribution into the same
  directory where you installed Ant.  If you have downloaded the source
  distribution, you must create the executable version by executing the
  following commands:

	cd jakarta-servletapi
	./build.sh dist		<-- Unix
	build dist		<-- Windows

* Download and install the JAKARTA-TOMCAT source code distribution (or check
  them out via anonymous CVS) into the same directory where you installed
  Ant and the Servlet API downloads.  To build an "unpacked" version of Tomcat
  into directory "../build/tomcat", execute the following commands:

	cd jakarta-tomcat
	./build.sh		<-- Unix
	build			<-- Windows

  To run the unpacked version of Tomcat, execute the following:

	cd ../build/tomcat	<-- Unix
	./bin/startup.sh	<-- Unix

	cd ..\build\tomcat	<-- Windows
	.\bin\startup		<-- Windows

  To shut down the unpacked version of Tomcat (from the same directory):

	./bin/shutdown.sh	<-- Unix
	.\bin\shutdown		<-- Windows

* You can also build a distribution version of Tomcat as follows:

	cd jakarta-tomcat
	./build.sh dist		<-- Unix
	build dist		<-- Windows

  which will create the distribution in directory "../dist/tomcat".


 source code, or check it out
  from the CVS repository, into a directory parallel to the jakarta-ant
  directory created above.  That is, if you downloaded both subprojects into
  a directory named $JAKARTA_HOME, you would see the following two entries:

	jakarta-ant/
	jakarta-servletapi/

  underneath it.



How to Build
------------

First, you must have the jakarta-ant workspace checked out parallel
to this workspace (jakarta-tomcat). Without jakarta-ant, you won't
be able to build.  When you have completed your downloads and checkouts,
you should have the following directory structure:

	$JAKARTA_HOME/
		jakarta-ant/    <-- Contains jakarta-ant files
		jakarta-tomcat/	<-- Contains jakarta-tomcat files

There are  2 compilation scripts provided, a sh based script for
Unix and a .bat based DOS build script. Essentially these scripts are
wrappers that put the ant.jar file on the classpath and calls:

        java org.apache.tools.ant.Main

To build, execute the following command in the jakarta-tomcat directory:

	build.sh		<-- Unix
	build			<-- Windows

This will build Tomcat into ../build/tomcat.

Windows Note: If you get an "Out of Environment Space" message, you
need to up the initial environment of your command prompt window.

To build a 'distribution' build (with all the classes jarred up nice) execute:

	build.sh dist		<-- Unix
	build dist		<-- Windows

This will build a distribution build of Tomcat into ../dist/tomcat

To clean out the build (removes the build dir):

	build.sh clean		<-- Unix
	build clean		<-- Windows


Running the Build
-----------------

If you are running under JDK 1.2, you will need to ensure that the
"tools.jar" file from your JDK distribution is present on your classpath.
The Java compiler is required by the JSP engine, which uses it when
converting JSP source files into Java class files.

Two scripts are provided for starting and stopping the server. To
start the server:

	cd ../build/tomcat	<-- Unix
	bin/startup.sh

	cd ..\build\tomcat	<-- Windows
	bin\startup

To stop the server:

	bin/shutdown.sh		<-- Unix
	bin\shutdown		<-- Windows


TESTING THE BUILD
-----------------

We have packaged a set of 'quick tests' that test out various parts of
Tomcat as a web application.  It is build automatically by the procedures
described above.  To execute it, do the following:

	cd ../build/tomcat	<-- Unix
	bin/tomcat.sh ant -buildfile conf/test-tomcat.xml

	cd ..\build\tomcat	<-- Windows
	bin\tomcat ant -buildfile conf/test-tomcat.xml


BEFORE COMMITTING CHANGES
-------------------------

You must, MUST do a `build clean;build` to make sure a clean
workspace builds. Also, you must, MUST run the tests. All tests must
pass before checking in code. Yes, we just started adding tests, but
as time goes on, this will be our sanity check.

This is not a MUST for changes to Java code but if you modify .bat or
sh scripts you MUST make sure that it atleast builds on Solaris, and
Windows NT.
