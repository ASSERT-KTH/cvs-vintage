<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (Win98; I) [Netscape]">
   <meta name="Author" content="Build">
   <title>JDT - Java Output Folder</title>
</head>
<body>

<p>
After much discussion about various ways to make the output folder of a Java
project more "hospitable" to class files not generated by the compiler, we've
come to the conclusion that the best way to address this problem is not by
changing JDT core, but by using existing mechanisms.

<p>
Here is an example plug-in (<a href="http://dev.eclipse.org/viewcvs/index.cgi/~checkout~/org.eclipse.jdt.core/notes/r2.0/output%20folder/libcopy-plugin.zip">attached<a>) to show what is possible. 
It deals with the issues raised in the customer development scenarios that we are aware of. 
Please send comments to the <a href="mailto:jdt-core-dev@eclipse.org">jdt-core-dev@eclipse.org</a> mailing list.

<p>
From the readme.txt...

<p>
The com.example.libcopy plug-in illustrates two things:

<ul>
<li>(1) How to copy additional class files into a Java project's output folder.
This is done using a incremental project builder that runs after the Java
builder.
</li>
<li>(2) How to remove any class files in a library folder for which there are
corresponding source files in a source folder. This is done by walking
the Java model to discover the names of the top-level types declared in
source, and then walking the resources in the library folder and deleting
and class files with names matching <type>.class or <type>$*.class.
</li>
</ul>

<h2>Installation</h2>

The file libcopy-plugin.zip should be extracted into the eclipse/plugins/
directory of an Eclipse install (1.0 or better). When correctly installed,
an extra menu labeled "Extras" appears on the main menu after Eclipse is
re-launched.

There are 3 items on this menu:
<ul>
<li>	Minimize Project </li>
<li>	Install Library Copying Builder on Project </li>
<li>	Uninstall Library Copying Builder on Project </li>
</ul>
These actions affect the project currently selected in the Navigator View.

Following these steps to see these in action:
<ul>
<li>	1. Turn off auto-builds (from Window > Preferences). </li>
<li>	2. Create a new Java project named "Test"
	<ul>
	<li> source folder "src", </li>
	<li> output folder "bin" </li>
	<li>library folder "classes" </li>
	</ul>
</li>	
<li>	3. Switch to the Resource Perspective and select Test in the Navigator. </li>
<li>	4. Select Extras > Install Library Copying Builder on Project. </li>
<li>	5. Import class files from eclipse/startup.jar into /Test/classes/. </li>
<li>	6. Select Project > Rebuild All 
</ul>
The class files from /Test/classes are copied into /Test/bin/.</li>
<ul>
<li>	7. Import source files from eclipse/startupsrc.zip into /Test/src.</li>
<li>	8. Select Project > Build (or Rebuild All)</li>
</ul>
The class files in /Test/bin/ get replaced by ones that the compiler
generates.
<ul>
<li>	9. Delete the source file UIMain.java.</li>
<li>	10. Select Project > Rebuild All</li>
</ul>
The class files in /Test/bin/ are now a mixture of ones that the compiler
generates and ones copied from the classes folder. Generated ones always
take precedence over a copy.

<ul>
<li>	11. Select Test in the Navigator.</li>
<li>	12. Select Extras > Minimize Project.</li>
</ul>
<p>
The class files in /Test/classes/ for which there are corresponding source
files in /Test/src/ have been deleted. There is no source code for the
remaining class files.

<p>
That's about it. Complete source code is provided. See LibCopyBuilder.java and
MinimizeLib.java for details. The known limitations of the approach are 
also documented there.

</body>
</html>