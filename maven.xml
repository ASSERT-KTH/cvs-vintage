<project default="war:war"
    xmlns:j="jelly:core"
    xmlns:u="jelly:util"
    xmlns:ant="jelly:ant">

  
  <goal name="scarab:deploy_docs_head" description="Copy documentation to scarab-gen head">
    <ant:echo message="Copying Site Documentation to ${scarab.docs.head}"/>
        
    <!--    
    Blank out the obvious stuff that causes CVS mismatch errors.  Like the $Id string that
    is replaced by CVS on checkin, or the Javadoc timestamp.    
    -->
    <j:set var="dollar.str" value="$"/>
    <j:set var="regExpression" value="\${dollar.str}Id:[^\${dollar.str}]*"/>
    <ant:echo message="regexp:${regExpression}" />
    <ant:replaceregexp match="\bGenerated by javadoc[^-]*" replace="BLANKED" byline="true">
      <ant:fileset dir="${maven.docs.dest}/apidocs" includes="**/*.html" />
    </ant:replaceregexp>
    
    <ant:replaceregexp match="${regExpression}" replace="BLANKED" byline="true">
        <ant:fileset dir="${maven.docs.dest}\jcoverage" includes="**/*.html" />
    </ant:replaceregexp>    

    <ant:replaceregexp match="${regExpression}" replace="BLANKED" byline="true">
        <ant:fileset dir="${maven.docs.dest}\xref" includes="**/*.html" />
    </ant:replaceregexp>       
    
    <ant:replaceregexp match="${regExpression}" replace="BLANKED" byline="true">
        <ant:fileset dir="${maven.docs.dest}\xref-test" includes="**/*.html" />
    </ant:replaceregexp>       
    
    <ant:copy todir="${scarab.docs.head}">
          <ant:fileset dir="${maven.docs.dest}"
            includes="**/*.*">
          </ant:fileset>
      </ant:copy>
  </goal>

 
</project>
