<?xml version="1.0"?>
<document url="./installation-ipas.xml">
<properties>
<author>Ueltzhoeffer</author> 
<title>The Struts Framework Project - Installation - iPortal Application Server</title>
</properties>
<body>

<section name="Installing Struts with your servlet container" href="Containers"> 

<h3><a name="ipas13">iPortal Application Server 1.3</a></h3>

<p>Tested with: Windows 2000</p>

<p><i>Important Note:</i> At the moment, iPAS 1.3 is not fully compliant with the 
JSP 1.1/1.2 specification. Specifically, the automatic type conversions 
for custom tag parameters specified in "Issue 7" of the JSP 1.1 Errata 
and in the JSP 1.2 Proposed Final Draft have not yet been implemented.
As it stands, JSP pages that make use of Struts taglibs whose parameters 
require conversion (such as booleans) will not compile under iPAS 1.3. 
This includes the Struts Example Application. Attempting to run the 
example a pplication will result in an exception similar to the 
following being thrown: </p>

<pre>
/struts-example/index.jsp:

javax.servlet.ServletException: Compilation error occured:

allaire.jrun.scripting.DefaultCFE: 

Errors reported by compiler:

c:/JRun/servers/default/Struts 
  Example/WEB-INF/jsp/jrun__index2ejspa.java:41:1:41:27: 

Error: No match was found for method "setLocale(java.lang.String)".
</pre>

<p>(For more details see refer to: 
<a href="http://www.mail-archive.com/struts-user@jakarta.apache.org/msg01860.html">
http://www.mail-archive.com/struts-user@jakarta.apache.org/msg01860.html</a>)</p>

<p>The following instructions describe how to install the Struts Example 
Application under iPAS 1.3. A subsequent section describes how the Struts 
Example Application can be patched to work with Struts.</p>

<p>The following instructions assume the following:</p>

<ul>
<li><a href="./installation-jrun.html">JRun</a> has been installed.</li>
<li>Both the Strut and XML Parser libraries are in your classpath.</li>
</ul>

<h4>Installing the struts example application</h4>

<ul>
<li>Start iPAS Services by clicking on the [Start iPAS Services] menu item. </li>
<li>Start the iPortal Application Server by clicking on the [iPortal Application 
Server] menu item. </li>
<li>Start a command shell. Change to the <code>$INSTALLDIR\IONA</code> and run the 
setenvs.bat file.</li>
<li>Create a directory called jars.</li>
</ul>

<p>Now run the EARSCO tool. Type <code>java iportal.earsco</code> and at the prompts do:</p>

<ul>
<li>Next</li>
<li>Type in the application name of <code>struts-example</code> then click next.</li>
<li>In step three click the check box and enter the name of the 
  WAR <code>struts-example</code>.Then click next.</li>
<li>Click on Finish.</li>
</ul>

<p>Now you must copy the contents of the struts-example war into the EARSCO 
directory structure as follows: </p>

<p>Under <code>$INSTALLDIR\IONA\jars\struts-examples\src\struts-example.war</code> you 
copy contect into the following directories: etc, lib, src and web.</p>

<ul>
<li>Copy all files in the root directory <br/>
  <code>$INSTALLDIR\jakarta-tomcat-3.2.1\webapps\struts-example\WEB-INF</code><br/>
  into the earsco directory<br/>
  <code>$INSTALLDIR\IONA\jars\struts-examples\src\struts-example.war\etc.</code><br/>
  Do not copy in the classes or lib directories.</li>

<li>Copy the directory <br/>
  <code>$INSTALLDIR\jakarta-tomcat-3.2.1\webapps\struts-example\WEB-INF\lib</code><br/>
  into the earsco directory<br/>
  <code>$INSTALLDIR\IONA\jars\struts-examples\src\struts-example.war\lib.</code></li>

<li>Copy the directory <br/>
  <code>$INSTALLDIR\jakarta-tomcat-3.2.1\webapps\struts-example\WEB-INF\classes</code><br/>
  into the earsco directory<br/>
  <code>$INSTALLDIR\IONA\jars\struts-examples\src\struts-example.war\src.</code>br/></li>

<li>Copy the directory <br/>
  <code>$INSTALLDIR\jakarta-tomcat-3.2.1\webapps\struts-example </code><br/>
  into the earsco directory <br/>
  <code>$INSTALLDIR\IONA\jars\struts-examples\src\struts-example.war\web.</code><br/> </li>

<li>Next modify the application.xml in the <br/>
  <code>$INSTALLDIR\IONA\jars\struts-examples\etc</code> directory to this: </li>
</ul>

<pre>
    &lt;application>

    &lt;!-- Add display name -->
          &lt;display-name>Struts Example&lt;/display-name>
                .......
</pre>

<ul>
<li>Last update the cc.xml in the <br/>
  <code>$INSTALLDIR\IONA\jars\struts-examples directory as follows:</code></li>
</ul>

<pre>
    &lt;configuration>
      &lt;web-app>
        &lt;context-root>struts-example&lt;/context-root>
      &lt;/web-app>  
    &lt;/configuration>
</pre>

<p>Now you are ready to compile and deploy the struts-example.</p>

<p>To compile the source from the $INSTALLDIR\IONA\jars\struts-examples type </p>

<p><code>java iportal.build</code></p>

<p>Next, type</p>

<p><code>java iportal.deploy</code></p>

<p>The first time you deploy you will be prompted by a Deploy wizard and asked to 
supply both location of the struts-example.ear file and of the cc.xml file. 
Once both elements have been statisfied continue till the finish button and 
click it. The EAR file should deploy sucessfully.</p>

<p>Test the sample application by using the following URL in the browser:</p>

<p><code>http://hostname/struts-example/index.jsp</code></p>

<p>The <code>struts-documentation.war</code> can be installed using the same procedure.</p>

<h4>Patching the struts example application</h4>

<p>As mentioned at the beginning of these notes, the Struts Example Application 
will not run under iPAS 1.3 without modification. The following changes will 
need to be made:</p>

<p><code>index.jsp</code>, <code>logon.jsp</code>: Change <code>&lt;html:html locale="true"></code> 
to <code>&lt;html:html locale=&lt;%= true %>></code></p>

<p><code>registration.jsp</code>, <code>subscription.jsp</code>: Change all instances of 
<code>filter="true"</code> to <code>filter=&lt;%= true %></code> </p>

<hr/>

<ul>
  <li>Author: John Ueltzhoeffer</li>
</ul>

<hr/>

<p>Back to <a href="installation.html#Containers">Installation</a></p></section> 

</body>
</document>
