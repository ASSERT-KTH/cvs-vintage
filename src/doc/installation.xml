<?xml version="1.0"?>
<document url="./installation.xml">

  <properties>
    <author>Craig R. McClanahan</author>
    <title>The Struts Framework Project - Installation</title>
  </properties>

  <body>

  <section name="Prerequisite Software" href="Prerequisites">

  <p>In order to build a Struts source distribution, or install and use a
  Struts binary distribution, you will need to acquire and install several
  other software packages, as follows:</p>
  <ul>
  <li><strong>Java Development Kit</strong> - You must download and install
      a version 1.1 (or later) Java Development Kit implementation for your
      operating system platform.  You <em>must</em> have a Java2 version
      (JDK 1.2 or later) to build the Struts source distribution, and several
      of the custom tags in the Struts library require Java2 to execute.
      A good starting point for locating Java Development Kit distributions is
      <a href="http://java.sun.com/j2se">http://java.sun.com/j2se</a>.</li>
  <li><strong>Servlet Container</strong> - You must download and install a
      servlet container that is compatible with the Servlet API Specification,
      version 2.2 or later, and the JavaServer Pages (JSP) Specification,
      version 1.1 or later.  One popular choice is to download Apache's
      <a href="http://jakarta.apache.org/tomcat">Tomcat</a> (version 3.1
      or later required, version 3.2 or later recommended).</li>
  <li><strong>Ant Build System</strong> - If you are building Struts from the
      source distribution, you must download and install version 1.1 or later
      of the <a href="http://jakarta.apache.org/ant">Ant</a> build system.
      This package is also strongly recommended for use in developing your
      own web applications based on Struts.</li>
  <li><strong>Servlet API Classes</strong> - In order to compile Struts itself,
      or applications that use Struts, you will need a <code>servlet.jar</code>
      file containing the Servlet and JSP API classes.  Most servlet containers
      include this JAR file.  Otherwise, you can get the Servlet API classes
      distribution from
      <a href="http://jakarta.apache.org/builds/jakarta-servletapi">here</a>.
      </li>
  <li><strong>XML Parser</strong> - Struts requires the presence of an XML
      parser that is compatible with the Java API for XML Parsing (JAXP)
      specification.  You can download and install the JAXP
      <a href="http://java.sun.com/xml">reference implementation</a>,
      which is required for building the Struts source distribution.  In
      Struts-based web applications, you may replace the reference
      implementation classes with any other JAXP compliant parser, such as
      <a href="http://xml.apache.org/xerces-j">Xerces</a>.  See detailed
      instructions related to the parser in the instructions for
      <a href="#Building">building</a> and <a href="#Installing">installing</a>
      Struts, below.</li>
  <li><strong>Xalan XSLT Processor</strong> - If you are building Struts from
      the source distribution, you must download and install version 1_2_D01
      (or later) of the <a href="http://xml.apache.org/xalan">Xalan</a>
      XSLT processor (which also includes the Xerces XML parser).  This
      processor is used to convert the Struts documentation from its internal
      XML-based format into the HTML that is presented in the Struts
      documentation application.</li>
  </ul>

  </section>


  <section name="Building Struts From Source" href="Building">

    <p>First, download a source distribution of Struts by following the
    instructions <a href="index.html#Acquiring">here</a>.  Then, make sure
    you have downloaded and installed all of the
    <a href="#Prerequisites">prerequisite</a> software packages described
    above.</p>

    <p>To build Struts, you will need to customize your development
    environment as follows:</p>
    <ul>
    <li>Set an environment variable <code>ANT_HOME</code> that contains the
        absolute pathname of the directory where you installed Ant.</li>
    <li>Set an environment variable <code>JAVA_HOME</code> that contains the
        absolute pathname of the directory where you installed your
        Java Development Kit.</li>
    <li>Set an environment variable <code>SERVLETAPI_HOME</code> that contains
        the absolute pathname of the directory where you installed the Servlet
        API distribution (not required if you have <code>servlet.jar</code>
        on your CLASSPATH already).</li>
    </ul>

    <p>To build a "distribution" version of Struts, first change your current
    directory to the directory in which you have unpacked the Struts
    source distribution, and then type one of the following commands (based
    on whether you are running on a Unix or Windows platform):</p>
    <pre>
        ./build.sh dist            &lt;-- Unix platform
        build dist                 &lt;-- Windows platform
    </pre>

    <p>This command will create a binary distribution of Struts, in a
    directory named <code>../dist/struts</code> (relative to where you
    are compiling from).  This directory contains an exact replica of the
    files included in a binary distribution of Struts.</p>

  </section>

  <section name="Install A Struts Binary Distribution" href="Installing">

    <p>First, download a binary distribution of Struts by following the
    instructions <a href="index.html#Acquiring">here</a>.  Then, make sure
    you have downloaded and installed all of the
    <a href="#Prerequisites">prerequisite</a> software packages described
    above.</p>

    <p>Unpack the Struts binary distribution into a convenient directory.
    (If you build Struts from the source distribution, the result of the
    build will already be an unpacked binary distribution for you).  The
    distribution consists of the following contents:</p>
    <ul>
    <li><strong>lib/struts.jar</strong> - This JAR file contains all of the
        Java classes included in Struts.  It should be copied into the
        <code>WEB-INF/lib</code> directory of your web application.</li>
    <li><strong>lib/struts.tld</strong> - This is the "tag library descriptor"
        file that describes the custom tags in the Struts library.  It should
        be copied into the <code>WEB-INF</code> directory of your web
        application.</li>
    <li><strong>webapps/struts-documentation.war</strong> - This is a
        "web application archive" file containing all of the Struts
        documentation found on the
        <a href="http://jakarta.apache.org/struts">Struts web site</a>
        (including these pages).  You can install this web application
        on any servlet container compatible with Servlet API 2.2 or later.</li>
    <li><strong>webapps/struts-example.war</strong> - This is an example
        web application that uses a large percentage of Struts features.
        You can install this web application on any servlet container
        compatible with the Servlet 2.2 (or later) and JSP 1.1 (or later)
        specifications.</li>
    <li><strong>webapps/struts-test.war</strong> - This web application
        contains test pages for the various custom tags supported by Struts.
        It is primarily of use to developers who are enhancing the Struts
        custom tag libraries, but may also be useful as simple examples of
        the usage of various Struts tags.</li>
    </ul>

    <p>To use Struts in your own application, you will need to follow
    these steps:</p>
    <ul>
    <li>Copy the file <code>lib/struts.jar</code> from the Struts distribution
        into the <code>WEB-INF/lib</code> directory of your web application.
        </li>
    <li>Copy the all of the files that match <code>lib/struts*.tld</code>
        from the Struts distribution into the <code>WEB-INF</code> directory
        of your web application.</li>
    <li>Modify the <code>WEB-INF/web.xml</code> file for your web application
        to include a <code>&lt;servlet&gt;</code> element to define the
        controller servlet, and a <code>&lt;servlet-mapping&gt;</code> element
        to establish which request URIs are mapped to this servlet.  Use the
        <code>WEB-INF/web.xml</code> file from the Struts example application
        for a detailed example of the required syntax.</li>
    <li>Modify the <code>WEB-INF/web.xml</code> file of your web application
        to include the following tag library declarations:
        <pre>
        &lt;taglib&gt;
          &lt;taglib-uri&gt;/WEB-INF/struts.tld&lt;/taglib-uri&gt;
          &lt;taglib-location&gt;/WEB-INF/struts.tld&lt;/taglib-location&gt;
        &lt;/taglib&gt;

        &lt;taglib&gt;
          &lt;taglib-uri&gt;/WEB-INF/struts-bean.tld&lt;/taglib-uri&gt;
          &lt;taglib-location&gt;/WEB-INF/struts-bean.tld&lt;/taglib-location&gt;
        &lt;/taglib&gt;

        &lt;taglib&gt;
          &lt;taglib-uri&gt;/WEB-INF/struts-logic.tld&lt;/taglib-uri&gt;
          &lt;taglib-location&gt;/WEB-INF/struts-logic.tld&lt;/taglib-location&gt;
        &lt;/taglib&gt;
        </pre>
        </li>
    <li>Create a file <code>WEB-INF/action.xml</code> that defines the action
        mappings for your specific application.  You can use the
        <code>action.xml</code> file from the Struts example application
        for a detailed example of the required syntax.</li>
    <li>At the top of each JSP page that will use the Struts custom tags,
        add line(s) declaring the Struts custom tag libraries used on
        this particular page, like this:
        <pre>
        &lt;@ taglib uri="/WEB-INF/struts.tld" prefix="struts" %&gt;
        &lt;@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %&gt;
        &lt;@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %&gt;
        </pre>
        </li>
    <li>When compiling the Java classes that comprise your application, be sure
        to include the <code>struts.jar</code> file (copied earlier) on the
        CLASSPATH that is submitted to the compiler.</li>
    </ul>

  </section>


  </body>

</document>
