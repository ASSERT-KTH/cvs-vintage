#set ( $action = $link.setPage("entry,Wizard1.vm").setAction("ReportIssue").addPathInfo("nextTemplate", "entry,Wizard3.vm") )
#set ($user = $scarabR.User)
#set ($module = $user.CurrentModule)
#set ($issue = $user.ReportingIssue)
#set ($attrValues = $issue.ModuleAttributeValuesMap)

<h1>Enter Issue</h1>
<div class="grouper">
<form name="ReportForm" method="post" action="$action">

<div class="datatitle">
    <table width="100%" cellpadding="3" cellspacing="2" border="1">
        <tr>
            <td>Input Your Issue:</td>
        </tr>
    </table>
</div>

<div class="listtable">
    <table width="100%" cellpadding="3" cellspacing="2" border="1">
#* 
<!-- Summary is not required here, but is in the ReportIssue Action for now.
     Eventually, that should be optional as well. We can just not do the dedup
     search if Summary is not a present attribute for this module.
     
        <tr>
            <td width="120" class="a">
            #set ( $attrValue = $attrValues.get("SUMMARY") )
            #set ( $attrInput = $intake.AttributeValue.mapTo($attrValue) ) 
            #attrValueErrorMsg( $attrValue "Value" )<br/>
            <strong>Summary:</strong></td>
            <td class="b">
<textarea name="$attrInput.Value.Key" rows="4" cols="40" class="text">$!attrInput.Value</textarea><br/>
                A short description of the issue.
            </td>
        </tr> -->
*#

#foreach ( $attVal in $attrValues )

  #if ($attVal.isDedupeAttribute())
    <tr>
        <td width="120" class="a">
     #if ( $attVal.Attribute.AttributeType.ValidationKey )
        #set ( $field = $attVal.Attribute.AttributeType.ValidationKey )
     #elseif ($attVal.Attribute.AttributeType.Name == "combo-box" )
        #set ( $field = "OptionId" )
     #elseif ($attVal.Attribute.AttributeType.Name == "string" )
        #set ( $field = "Value" )
     #end

     #if ( $attVal.isRequired() )
        <b>*</b>
     #end
     
     <strong>
     $attVal.Attribute.Name:
     </strong>
     
        #attrValueErrorMsg ( $attVal $field )

    </td>
    <td class="b">
    #if ( $attVal.Attribute.AttributeType.Name == "string" )
        #attrValueText ( $attVal "50" )
    #else
        #attrValueLeafSelect ($attVal $field "")
    #end
    </td>
    </tr>
  #end
#end
    </table>
</div>

<table width="100%" cellpadding="3" cellspacing="2" border="0">
    <tr>
    <td>
        <input type="submit" 
            name="eventSubmit_doSubmitattributes" value="Next ->" class="button"/>
            &#160;<input type="reset" value="reset" class="button"/>
    </td>
    </tr>
</table>


$intake.declareGroups()
</form>
</div>









