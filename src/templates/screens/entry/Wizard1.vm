$page.setTitle("Enter issue")

<div id="wizard1" class="app">

#set ($issue = $scarabR.ReportingIssue)
#set ($attrValues = $issue.ModuleAttributeValuesMap)
#set ($module = $scarabR.CurrentModule)
#set ($user = $data.User)

<h2>$page.Title</h2>

<div class="tabs">
<table cellpadding="3" cellspacing="0" border="0">
<tr>
<th>1: Summary info</th>
<td>2: Duplicate check</td>
<td>3: Verbose info</td>
</tr>
</table>
</div>

<form method="post" action="$link.setPage("entry,Wizard1.vm").setAction("ReportIssue")">
<input type="hidden" name="$scarabG.Constant.NEXT_TEMPLATE" value="entry,Wizard3.vm" />

<div class="functnbar">
<table cellpadding="4" cellspacing="0" border="1">
 <tr>
  <td class="firstchild">
  <input type="submit" name="eventSubmit_doCheckforduplicates" value="Check for duplicates" />&#160;
  <input type="reset" value="Reset" />
  </td>
 </tr>
</table>
</div>

## FIXME: Not working yet
#set ($privateTemplateList = $module.getPrivateTemplates($user))
#set ($globalTemplateList = $module.GlobalTemplates)
#if ($privateTemplateList.size() > 0 || $globalTemplateList.size() > 0)
<h3>Apply issue entry template</h3>
<div class="axial">
 <table cellpadding="3" cellspacing="2" border="0">
 <tr>
 <th>Templates</th>
 <td>
 <select>
#foreach ($template in $privateTemplateList)
<option value="">$template.TemplateInfo.Name</option>
#end
#foreach ($template in $globalTemplateList)
<option value="">$template.TemplateInfo.Name</option>
#end
</select>
   <input type="submit" value="Select" /> &#160;
   <a href="$link.setPage("TemplateList.vm")">Template List</a>
 </td>
 </tr>
 </table>
 </div>
#end

<h3>Input your issue</h3>

<div class="axial">
<table cellpadding="3" cellspacing="2" border="0">
#foreach ( $attKey in $attrValues.sequence() )
  #set ( $attVal = $attrValues.get($attKey) )
  #if ($attVal.isDedupeAttribute())
  <tr>
   <th>
     #if ( $attVal.Attribute.AttributeType.ValidationKey )
        #set ( $field = $attVal.Attribute.AttributeType.ValidationKey )
     #elseif ($attVal.Attribute.AttributeType.Name == "combo-box" )
        #set ( $field = "OptionId" )
     #elseif ($attVal.Attribute.AttributeType.Name == "string" )
        #set ( $field = "Value" )
     #end
     #if ( $attVal.isRequired() )
        *
     #end
     $attVal.RModuleAttribute.DisplayValue
   </th>
   <td>
    #if ( $attVal.Attribute.AttributeType.Name == "string" )
        #attrValueText ( $attVal "50" )
    #else
        #attrValueLeafSelect ($attVal $field "")
    #end
     #attrValueErrorMsg ( $attVal $field )
   </td>
   </tr>
  #end
#end
</table>
</div>

<div class="functnbar2">
<table cellpadding="4" cellspacing="0" border="1">
 <tr>
  <td class="firstchild">
  <input type="submit" name="eventSubmit_doCheckforduplicates" value="Check for duplicates" />&#160;
  <input type="reset" value="Reset" />
  </td>
 </tr>
</table>
</div>

$intake.declareGroups()
</form>
</div>
