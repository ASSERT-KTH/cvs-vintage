$page.setTitle("Select Module")

#set ($userModules = $data.User.Modules)
#set ($currentModule = $scarabR.CurrentModule)
<div id="selectmodule" class="app">

<h2>$page.Title</h2>

#if ($currentModule)
<h3>Currently selected module</h3>
<table cellpadding="3" cellspacing="2" border="1" width="100%">
<tr>
    <th>Module name</th>
    <th>Module desc</th>
</tr>
<tr>
    <td>
    $currentModule.Name
    </td>
    <td>$currentModule.Description</td>
</tr>
</table>

#set ($canEdit = $scarabR.hasPermission($scarabG.Permission.MODULE__EDIT, $currentModule))
#if ($canEdit)
<form action="$link.setPage("ModifyModule.vm")" method="post">
<div class="functnbar2">
<table cellpadding="4" cellspacing="0" border="1">
 <tr>
  <td class="firstchild">
  <input type="submit" name="maxumusDorkus" value="Edit" />
  </td>
 </tr>
</table>
</div>
</form>
#end

#end

<h3>Select new module</h3>
#if ($userModules.size() > 0)
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<tr>
    <th>Module name</th>
    <th>Module desc</th>
</tr>

#if ($nextTemplate && $nextTemplate.length() > 0)
#set ($tmpNext = $nextTemplate)
#else
#set ($tmpNext = "SelectModule.vm")
#end

#foreach ($module in $userModules)
#indexedRows($velocityCount)
<td>
<a href="$link.setPage("SelectModule.vm").setAction("SelectModule").addPathInfo($scarabG.Constant.NEXT_TEMPLATE, "$tmpNext").addPathInfo("newmodule", "$module.ModuleId")">$module.Name</a>
</td>
<td>
$module.Description
</td>
</tr>
#end

</table>

#else
<p><strong class="alert">
Sorry, you do not have access to select any other modules. Please
<a href="$link.setPage("Login.vm").addPathInfo($scarabG.Constant.NEXT_TEMPLATE, "SelectModule.vm")">Login</a> with an account that
has permissions to select a Module.
</strong></p>
#end

</div>
