<div class="app" id="div2-1-4-0">

$page.setTitle("Attribute Editor")
#set ( $module = $scarabR.CurrentModule )
#set ( $moduleGroup = $intake.Module.mapTo($module) )

 <h2>Customize/create artifact type (2.1.4.0)</h2>

<form method="get" action="$link.setPage("admin,artifacttypeedit.vm")">
      <input type="hidden" name="action" value="admin.ModifyModuleAttributes" />
      <input type="hidden" name="nextTemplate" value="admin,ArtifactTypeEdit.vm"/>


<div class="functnbar">
<table cellpadding="4" cellspacing="0" border="1">
<tr>
<td class="firstchild"><div>
Screen options
</div>
<input type="submit" value="Submit changes" name="eventSubmit_doModifyattributes" />&#160;<input type="submit" value="Cancel" />
</td>
<td><div>
Attribute group options
</div>
<input type="submit" value="Add new" name="eventSubmit_doCreatenewgroup" />&#160;<input type="submit" value="Copy" />&#160;<input type="submit" value="Delete" name="eventSubmit_doDeletegroup" />&#160;<input type="submit" value="Resort" />
</td>
</tr></table>
</div>

        
        <h3>Artifact type details</h3>
        
        <div class="axial">
            <table border="0" cellspacing="2" cellpadding="3">
            <tr>
            <th>Artifact type name</th>
            <td><input type="text" size="25" name="$moduleGroup.Name.Key" value="$!moduleGroup.Name.Value" /></td>
            </tr>
            
            <tr>
            <th>Artifact type descr</th>
            <td><textarea rows="4" cols="40" name="$moduleGroup.Description.Key">$!moduleGroup.Description.Value</textarea></td>
            </tr>
            
            <tr>
            <th>author</th>
            <td><div>Joe Smo</div>
            <a href="#">joes@users.com</a></td>
            </tr>
            </table>
        </div>
        
        
        <h3>Artifact instance "history" and "Comments" display options</h3>
        
        <p><input type="checkbox" checked="checked" />&nbsp;Show&nbsp;
        <select class="select">
        <option>5</option>
        <option>10</option>
        <option>15</option>
        <option>20</option>
        </select>
        most recent artifact instance history entries (otherwise, a link will appear leading to a seperate page).
        </p>
        
        <p><input type="checkbox" checked="checked" />&nbsp;Show&nbsp;
        <select class="select">
        <option>5</option>
        <option>10</option>
        <option>15</option>
        <option>20</option>
        </select>
        most recent artifact instance comments (otherwise, a link will appear to a seperate page).
        </p>

                        
        <h3>Attribute groups</h3>
        
#set ( $groups = $module.AttributeGroups) 

#if ($groups.isEmpty())

## NO GROUPS YET - user must push button to create default groups
<p><strong class="alert">This module has no groups. Please click to create default groups.</strong></p>
      <p><input type="submit" value="create default attribute groups" name="eventSubmit_doCreatedefaults" /></p>
</form>
        
#else
        #set ( $maxNum = $module.AttributeGroups.size()+1 )

<table width="100%" border="1" cellspacing="2" cellpadding="3">
        <tr>
        <th nowrap="nowrap">Select</th>
        <th>Attribute group name</th>
        <th>Active/inactive</th>
        <th>Sequence #</th>
        </tr>

  #foreach ( $group in $groups )
## DEDUPE
     #if ($velocityCount == ($module.DedupeSequence))
         <tr>
             <td>&nbsp;</td>
             <td>Duplicate check</td>
             <td>#booleanCheckbox ($moduleGroup.Dedupe)</td>
             <td>#numericSelect( "dupe_order" 1 $maxNum $module.DedupeSequence 1 )</td>
         </tr>
       #end
<form method="get" action="$link.setPage("admin,artifacttypeedit.vm")">
      <input type="hidden" name="action" value="admin.ModifyModuleAttributes" />
      <input type="hidden" name="nextTemplate" value="admin,ArtifactTypeEdit.vm" />
    #set ( $agGroup = $intake.AttributeGroup.mapTo($group) )

        #rows()
        <td><input type="checkbox" name="delete_group_$group.AttributeGroupId" /></td>
        <td><a href="$link.setPage("admin,attributegroup.vm").addpathinfo("groupid", $group.attributegroupid)">$group.Name</a></td>
        <td>#booleanCheckbox ($agGroup.Active)</td>
        <td>
            #numericSelect( $agGroup.Order.Key 1 $maxNum $agGroup.Order.Value 1 )</td> </tr> 
#end
#end
        </td>
        </tr>
        </table>

 
        <div class="functnbar2">
            <table cellpadding="4" cellspacing="0" border="1">
	<tr>
		<td class="firstchild"><div>
Screen options
</div><input type="submit" value="Submit changes" name="eventSubmit_doModifyattributes" />&#160;<input type="submit" value="Cancel" /></td>
            
<td><div>
Attribute group options
</div>
<input type="submit" value="add new" name="eventSubmit_doCreatenewgroup" />&#160;<input type="submit" value="copy" />&#160;<input type="submit" value="delete" name="eventSubmit_doDeletegroup" />&#160;<input type="submit" value="resort" />
</td>
</tr>
</table>
</div>      
$intake.declareGroups()
</form>
</div>
