$page.setTitle("Attribute Editor")

#set ($user = $scarabR.User)
#set ($module = $user.CurrentModule)

<h1>Global Attributes</h1>

<p>
This page is for editing the Attributes which are defined globally.
</p>

<div class="functnbar">
<table width="100%" cellpadding="3" cellspacing="2" border="1">
<tr>
 <td><input type="submit" value="create" class="buttonfunc"/>&#160;new attribute</td>
</tr>
</table>
</div>

<div class="grouper">

#datatitle("Attributes")

<p>#actionErrorMsg()</p>

<div class="datatable">

<form action="$link.setPage("admin,AttributeShow.vm")" method="GET">
    <input type="hidden" name="action" value="admin.ModifyAttributes">
    <input type="hidden" name="nextTemplate" value="admin,AttributeEdit.vm">

<table width="100%" border="1" cellspacing="2" cellpadding="3">
<tr>
<th><a href="#"><img src="/scarab/images/icon_uparrow.gif" width="13" height="8" alt="sort" border="0"/></a><a href="#"><img src="/scarab/images/icon_downarrow.gif" width="13" height="8" alt="sort" border="0" /></a></th>
<th><a href="#">attribute name:</a></th>
<th><a href="#">input type:</a></th>
<th><a href="#">description:</a></th>
<th><a href="#">author:</a></th>
<th><a href="#">creation date:</a></th>
</tr>

#set ( $attgroup = $intake.Attribute.Default ) 

#foreach( $attribute in $module.AllAttributes )
#if ( $velocityCount % 2 > 0 )
<tr class="a">
#else
<tr class="b">
#end
<td><input type="checkbox"/></td>
<td>$attribute.Name (<a href="$link.setPage("admin,AttributeShow.vm").setAction("admin.ModifyAttributes").addPathInfo("intake-grp", "att").addPathInfo("att", "_0").addPathInfo("eventSubmit_doSelectattribute", "Modify Attribute").addPathInfo("$attgroup.Id.Key", "$attribute.AttributeId").addPathInfo("nextTemplate","admin,AttributeEdit.vm")">edit</a>)</td>
<td>
    #set ($attType = $attribute.AttributeType)
    #foreach ( $atype in $attribute.AllAttributeTypes )
      #if($attType.AttributeTypeId == $atype.AttributeTypeId)
        $atype.Name
      #end
    #end
</td>
<td>#if ($attribute.Description) $attribute.Description #else &nbsp; #end</td>
<td>x (x@xxx.com)</td>
<td>$attribute.CreatedDate</td>
<td><a href="#">copy</a></td>
</tr>
#end
</table>

</div>

$intake.declareGroups()
</form>
