$page.setTitle("Manage artifact types")

#set ($issueTypes = $scarabR.CurrentModule.AvailableIssueTypes)

<form method="post" action="$link.setPage("admin,ManageArtifactTypes.vm")">
<input type="hidden" name="action" value="admin.ModifyModuleAttributes" />
<input type="hidden" name=$scarabG.Constant.NEXT_TEMPLATE value="admin,ManageArtifactTypes.vm" />
<input type="hidden" name=$scarabG.Constant.OTHER_TEMPLATE value="admin,ArtifactTypeSelect.vm" />

#macro (ManageArtifactTypesBar $var)
<div class="functnbar">
  <table cellpadding="4" cellspacing="0" border="1">
    <tr>
    <td class="firstchild">
      <input type="submit" value="Save" name="eventSubmit_doManageissuetypes" />&#160;
      <input type="submit" value="Delete" name="eventSubmit_doDeletemoduleissuetype" />&#160;
      <input type="submit" value="Cancel" />
    </td>
#if (!$issueTypes.isEmpty())
    <td nowrap="nowrap">
      <div>Artifact type management:</div>      
      <input type="submit" value="Add existing" name="eventSubmit_doGotoothertemplate" />&#160;
      <input type="submit" value="Add new " name="eventSubmit_doCreateartifacttype" />&#160;
      <!-- FIXME: <input type="submit" value="Copy" />&#160; -->
      <!-- FIXME: <input type="submit" value="Resort" /> -->
    </td>
#end
    </tr>
  </table>
</div>
#end

<div class="app" id="div2-1-4-0">

<h2>$page.Title</h2>


#ManageArtifactTypesBar("")

<h3>Artifact types</h3>

<table width="100%" border="1" cellspacing="2" cellpadding="3">
<tr>
<th>select</th>
<th>Artifact type name</th>
<th>(in)active</th>
<th>Show in left hand nav*</th>
<th>Sequence #</th>
</tr>

#set ($module = $scarabR.CurrentModule)
#set ($rmits = $module.RModuleIssueTypes)

#foreach ($rmit in $rmits)
#set ( $rmitGroup = $intake.RModuleIssueType.mapTo($rmit) )
#indexedRows($velocityCount)
<td><input type="checkbox" name="delete_$rmit.IssueTypeId"/></td>
<td><a href="$link.setPage("admin,ArtifactTypeEdit.vm").addPathInfo("issueTypeId", $rmit.IssueTypeId)">#if ($rmit.DisplayName) $rmit.DisplayName #else $rmit.IssueType.Name #end</a></td>
<td>#booleanCheckbox ($rmitGroup.Active)</td>
<td>#booleanCheckbox ($rmitGroup.Display)</td>
<td>#numericSelect( $rmitGroup.Order.Key 1 5 $rmit.Order 1 )</td>
</tr>        
#end
</table>

#ManageArtifactTypesBar("2")
        
<p>* Maximum of five Artifact types in left hand navigation (first five
selected will appear).</p>

$intake.declareGroups()
</form>

</div>
