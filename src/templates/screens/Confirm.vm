$page.setTitle("Confirm Your Email Address")

<div class="app" id="confirm">

<h2>$page.Title</h2>

## attempt to get the user out of the temp hashtable
#set ($user = $data.User.getTemp($scarabG.Constant.SESSION_REGISTER))
#if ($user)
 #set ($regGroup = $intake.Register.mapTo($user))
 #set ($emailValue = $user.Email)
#else
 #set ($regGroup = $intake.Register.Default)
 #set ($emailValue = $data.Parameters.Email)
 #if (!$emailValue || $emailValue.length() == 0)
    ## coming from the Login page for a non-confirmed user
    #set ($emailValue = $intake.Login.Default.Username)
 #end
#end
#set ($confirmValue = $data.Parameters.getString("confirm", ""))

#if (!$data.Message || $data.Message.length() == 0)
<p>
Thanks for registering!
</p>

<p>
We have now sent you a confirmation message via email to verify that
the email address you supplied is working properly. To complete your
registration click on the link in the email or type in the confirmation
code below. If you do not choose to confirm your account now, you will
be asked to confirm it the next time you try to login.
</p>
#else
<p>
Please enter the confirmation code that was sent to you in an email.
</p>
#end

<form method="post" action="$link.setPage("Confirm.vm")">
 <input type="hidden" name="action" value="Confirm" />
 <input type="hidden" name="$scarabG.Constant.NEXT_TEMPLATE" value="Login.vm" />
 <input type="hidden" name="$scarabG.Constant.CANCEL_TEMPLATE" value="Login.vm" />

<h3>Confirmation Information</h3>

<div class="axial">
<table cellpadding="3" cellspacing="2" border="0">
 <tr>
  <th>Email Address</th>
  <td>
   <input type="text" size="25" name="$regGroup.Email.Key" value="$!emailValue" tabindex="1" />
   #fieldErrorMsg($regGroup.Email "")
  </td>
 </tr>
 <tr>
  <th>Confirmation Code</th>
  <td>
   <input type="text" size="25" name="$regGroup.Confirm.Key" value="$!confirmValue" tabindex="2" />
   #fieldErrorMsg($regGroup.Confirm "")
  </td>
 </tr>
</table>
</div>

<div class="functnbar2">
<table cellpadding="4" cellspacing="0" border="1">
 <tr>
  <td class="firstchild">
<input type="submit" name="eventSubmit_doConfirm" value="Confirm" tabindex="3" />&#160;
<input type="submit" name="eventSubmit_doCancel" value="Cancel" tabindex="4" />
  </td>
 </tr>
</table>
</div>

$intake.declareGroups()
</form>
</div>
