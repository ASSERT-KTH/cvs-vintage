<?xml version="1.0" encoding="UTF-8"?>


<!-- ===================================================================== -->
<!--                                                                       -->
<!--  JBoss Server Configuration                                           -->
<!--                                                                       -->
<!-- ===================================================================== -->

<!-- $Id: hsqldb-default-service.xml,v 1.5 2001/11/20 22:15:23 d_jencks Exp $ -->


<server>


  <classpath archives="
	 hsqldb.jar,
	 hsqldb-plugin.jar"/>

  <!-- ==================================================================== -->
  <!-- JDBC - Initialize the databases                                      -->
  <!-- to ConnectionFactoryLoader                                           -->
  <!-- ==================================================================== -->

  <mbean code="org.jboss.resource.ConnectionFactoryLoader" 
	 name="JBOSS-SYSTEM:service=ConnectionFactoryLoader,name=DefaultDS">
    <attribute name="ManagedConnectionFactoryProperties">ConnectionURL=jdbc:hsqldb:hsql://localhost:1476
  DriverClass=org.hsqldb.jdbcDriver
  UserName=sa</attribute>
    <attribute name="JndiName">DefaultDS</attribute>
    <attribute name="TransactionManagerName">java:/TransactionManager</attribute>

    <!--Anonymous mbean-ref to database being started -->
    <!--WARNING: DO NOT COPY BLINDLY! This is useful only if the database is
        started by an mbean in the jboss jmx framework! The only example of this 
        we have right now is hsqldb! Do not use a line like this for external 
        databases. -->
    <mbean-ref>JBOSS-SYSTEM:service=Hypersonic</mbean-ref>

    <mbean-ref name="ResourceAdapterName">JCA:service=RARDeployment,name=Minerva JDBC LocalTransaction ResourceAdapter</mbean-ref>
    <mbean-ref name="ConnectionManagerFactoryLoaderName">JCA:service=ConnectionManagerFactoryLoader,name=MinervaSharedLocalCMFactory</mbean-ref>
    <attribute name="ConnectionManagerProperties">#
      #Wed Aug 15 16:17:29 EDT 2001
      MinSize=0
      MaxSize=10
      BlockingTimeoutMillis=5000
      IdleTimeoutMinutes=30
      CleanupIntervalMinutes=10
      MaxIdleTimeoutPercent=1.0
    </attribute>
    <attribute name="PrincipalMappingClass">
      org.jboss.resource.security.ManyToOnePrincipalMapping
   </attribute>
    <attribute name="PrincipalMappingProperties">UserName=sa</attribute>
  </mbean>

  <mbean code="org.jboss.resource.ConnectionFactoryLoader" 
	 name="JBossMQ:service=ConnectionFactoryLoader,name=NoTransDS">
    <attribute name="ManagedConnectionFactoryProperties">ConnectionURL=jdbc:hsqldb:hsql://localhost:1476
  DriverClass=org.hsqldb.jdbcDriver
  UserName=sa
  AutoCommit=true</attribute>
    <attribute name="JndiName">NoTransDS</attribute>
    <attribute name="TransactionManagerName">java:/TransactionManager</attribute>

    <!--Anonymous mbean-ref to database being started -->
    <mbean-ref>JBOSS-SYSTEM:service=Hypersonic</mbean-ref>

    <mbean-ref name="ResourceAdapterName">JCA:service=RARDeployment,name=Minerva JDBC LocalTransaction ResourceAdapter</mbean-ref>
    <mbean-ref name="ConnectionManagerFactoryLoaderName">JCA:service=ConnectionManagerFactoryLoader,name=MinervaNoTransCMFactory</mbean-ref>
    <attribute name="ConnectionManagerProperties">#
      #Wed Aug 15 16:17:29 EDT 2001
      MinSize=0
      MaxSize=10
      BlockingTimeoutMillis=5000
      IdleTimeoutMinutes=30
      CleanupIntervalMinutes=10
      MaxIdleTimeoutPercent=1.0
    </attribute>
    <attribute name="PrincipalMappingClass">
      org.jboss.resource.security.ManyToOnePrincipalMapping
   </attribute>
    <attribute name="PrincipalMappingProperties">UserName=sa</attribute>
  </mbean>

  <!-- Moved to end to test anonymous mbean-refs -->

  <mbean code="org.jboss.jdbc.HypersonicDatabase" 
	 name="JBOSS-SYSTEM:service=Hypersonic">
    <attribute name="Port">1476</attribute>
    <attribute name="Silent">true</attribute>
    <attribute name="Database">default</attribute>
    <attribute name="Trace">false</attribute>
  </mbean>

</server>
