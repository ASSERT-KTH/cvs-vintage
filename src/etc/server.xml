<?xml version="1.0" encoding="ISO-8859-1"?>
<Server>

    <!-- You can add a "home" attribute to represent the "base" for 
         all relative paths. If none is set, the TOMCAT_HOME property
         will be used, and if not set "." will be used.
         webapps/, work/ and log/ will be relative to this ( unless 
         set explicitely to absolute paths ).
         You can also specify a "randomClass" attribute, which determines 
         a subclass of java.util.Random will be used for generating session IDs.
         By default this is "java.security.SecureRandom". 
         Specifying "java.util.Random" will speed up Tomcat startup, 
         but it will cause sessions to be less secure.
      -->
    <ContextManager debug="0" workDir="work" >

      <!-- ==================== Interceptors ==================== -->

        <!-- no path - console output -->
        <ContextInterceptor  name="tc_log" 
            className="org.apache.tomcat.modules.config.LogSetter"
            verbosityLevel = "INFORMATION"  />

        <ContextInterceptor  name="servlet_log" 
            className="org.apache.tomcat.modules.config.LogSetter"
            verbosityLevel = "INFORMATION"
            path="logs/servlet-${yyyyMMdd}.log" />

        <ContextInterceptor  name="JASPER_LOG" 
            className="org.apache.tomcat.modules.config.LogSetter"
            path="logs/jasper-${yyyyMMdd}.log" />
            verbosityLevel = "INFORMATION"  />

        <!-- 
         ContextInterceptor 
            className="org.apache.tomcat.modules.loggers.LogEvents" 
         -->
        
        <ContextInterceptor 
            className="org.apache.tomcat.modules.config.ContextXmlReader" />

        <ContextInterceptor 
            className="org.apache.tomcat.modules.config.AutoSetup" />

        <!-- Generate includeable Apache configuration files for mod_jserv
             and mod_jk.
          -->
        <ContextInterceptor
            className="org.apache.tomcat.modules.config.ApacheConfig" />

        <ContextInterceptor 
            className="org.apache.tomcat.facade.WebXmlReader" />

        <ContextInterceptor 
            className="org.apache.tomcat.modules.config.PolicyLoader" />

        <ContextInterceptor 
            className="org.apache.tomcat.modules.config.LoaderInterceptor11" />

        <ContextInterceptor 
            className="org.apache.tomcat.modules.generators.ErrorHandler" />

        <ContextInterceptor 
            className="org.apache.tomcat.modules.config.WorkDirSetup" />

        <!-- Request processing -->
        <!-- Session interceptor will extract the session id from cookies and 
             deal with URL rewriting ( by fixing the URL )
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.session.SessionId" />

        <!-- Find the container ( context and prefix/extension map ) 
             for a request.
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.mappers.SimpleMapper1" 
            debug="0" />

        <!-- fix the context class loader, other JDK1.2 specific code -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.generators.Jdk12Interceptor" 
            debug="0" />
          <!-- -->

        <!-- Non-standard invoker, for backward compat. ( /servlet/* )
          -->
        <RequestInterceptor 
           className="org.apache.tomcat.modules.generators.InvokerInterceptor" 
           debug="0" />

        <!-- "jsp" handler 
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.facade.JspInterceptor" 
            debug="0"  />
        
        <!-- "default" handler - static files and dirs
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.generators.StaticInterceptor" 
            debug="0" listings="true" />
        
	<!-- Handle reloads - will be moved to per/context
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.mappers.ReloadInterceptor" 
            debug="0" />

        <!-- Plug a session manager. You can plug in more advanced session
             modules.
          -->
        <RequestInterceptor 
	    className="org.apache.tomcat.modules.session.SimpleSessionStore" />

        <!-- Check if the request requires an authenticated role.
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.aaa.AccessInterceptor" 
            debug="0" />

        <!-- Implements BASIC and FORM autorization
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.aaa.CredentialsInterceptor" 
            debug="0" />

        <!-- Check permissions using the simple xml file. You can 
             plug more advanced authentication modules.
             uncomment below to have a global tomcat Realm.
          -->
        <RequestInterceptor 
            className="org.apache.tomcat.modules.aaa.SimpleRealm" 
            filename="conf/users/global-users.xml"
            debug="0" />

       <!-- UnComment the following and comment out the
            above to get a JDBC realm.
            Other options for driverName: 
              driverName="oracle.jdbc.driver.OracleDriver"
              connectionURL="jdbc:oracle:thin:@ntserver:1521:ORCL"
              connectionName="scott"
              connectionPassword="tiger"

              driverName="org.gjt.mm.mysql.Driver"
              connectionURL="jdbc:mysql://localhost/authority"
              connectionName="test"
              connectionPassword="test"

            "connectionName" and "connectionPassword" are optional.
        -->
        <!--
        <RequestInterceptor 
            className="org.apache.tomcat.modules.aaa.JDBCRealm" 
            debug="99" 
	    driverName="sun.jdbc.odbc.JdbcOdbcDriver" 
	    connectionURL="jdbc:odbc:TOMCAT" 
	    userTable="users" 
            userNameCol="user_name" 
            userCredCol="user_pass" 
	    userRoleTable="user_roles" 
            roleNameCol="role_name" />
        -->

        <!-- Loaded last since JSP's that load-on-startup use request handling -->
        <ContextInterceptor 
            className="org.apache.tomcat.facade.LoadOnStartupInterceptor" />

        <!-- Loaded last since JSP's that load-on-startup use request handling -->
        <RequestInterceptor 
            className="org.apache.tomcat.facade.Servlet22Interceptor" />

      <!-- ==================== Connectors ==================== -->

        <!-- new http adapter. Attributes:
                secure - use SSL ( https )
                keystore, keypass - certs for SSL
                port -->
        <!-- Normal HTTP -->
        <RequestInterceptor 
         className="org.apache.tomcat.modules.server.Http10Interceptor"
         port="8080" />

        <!--
            Uncomment this for SSL support. 
            You _need_ to set up a server certificate if you want this
            to work, and you need JSSE.
            1. Add JSSE jars to CLASSPATH 
            2. Edit java.home/jre/lib/security/java.security
               Add:
               security.provider.2=com.sun.net.ssl.internal.ssl.Provider
            3. Do: keytool -genkey -alias tomcat -keyalg RSA
               RSA is essential to work with Netscape and IIS.
               Use "changeit" as password. ( or add keypass attribute )
               You don't need to sign the certificate.
 
            You can set parameter keystore and keypass if you want 
            to change the default ( user.home/.keystore with changeit )
         -->
        <!--
        <RequestInterceptor 
         className="org.apache.tomcat.modules.server.Http10Interceptor"
         port="8443" 
         secure="true" />
        -->
        <!--
             JNI connector, make sure that you update the native_lib
             Parameter to point to your jni_connect.dll.
         -->
        <!-- 
        <RequestInterceptor 
         className="org.apache.tomcat.modules.server.JNIConnectionHandler"
         nativeLibrary="D:\tomcat\bin\i386\jni_connect.dll" />
         -->

        <!-- Apache AJP12 support. This is also used to shut down tomcat.
          -->
        <RequestInterceptor 
         className="org.apache.tomcat.modules.server.Ajp12Interceptor"
         port="8007" />

        <!-- Apache AJP13 support (mod_jk)
          -->
        <RequestInterceptor 
         className="org.apache.tomcat.modules.server.Ajp13Interceptor"
         port="8009" />

        <!-- ==================== Special webapps ==================== -->
        <!-- You don't need this if you place your app in webapps/
             and use defaults. 
             For security you'll also need to edit tomcat.policy

             Defaults are: debug=0, reloadable=true, trusted=false
             (trusted allows you to access tomcat internal objects 
              with FacadeManager )
 
             If security manager is enabled, you'll have read perms.
             in the webapps dir and read/write in the workdir.
         -->

         <Context path="/examples" 
            docBase="webapps/examples" 
            debug="0" 
	    reloadable="true" > 
              <RequestInterceptor 
                  className="org.apache.tomcat.modules.aaa.SimpleRealm" 
                  filename="conf/users/example-users.xml"
                  debug="0" />
              <ContextInterceptor  name="example_tc_log" 
                  className="org.apache.tomcat.modules.config.LogSetter"
                  verbosityLevel = "INFORMATION"
                  path="logs/examples.log" />
              <ContextInterceptor  name="example_servlet_log" 
                 className="org.apache.tomcat.modules.config.LogSetter"
                 verbosityLevel = "INFORMATION"
                 path="logs/servlet_examples.log" servletLogger="true"/>
        </Context>

        <!-- Admin context will use tomcat.core to add/remove/get info about
             the webapplications and tomcat internals. 
             By default it is not trusted - i.e. it is not allowed access to 
             tomcat internals, only informations that are available to all 
             servlets are visible.

             If you change this to true, make sure you set a password.
          -->
        <Context path="/admin" 
                 docBase="webapps/admin" 
                 debug="0" 
                 reloadable="true" 
                 trusted="false" > 
        <RequestInterceptor 
            className="org.apache.tomcat.modules.aaa.SimpleRealm" 
            filename="conf/users/admin-users.xml"
            debug="0" />
        </Context>

        <!-- Virtual host example - 
             In "127.0.0.1" virtual host we'll reverse "/" and 
             "/examples"
             (XXX need a better example )
             (use  "http://127.0.0.1/examples" )
        <Host name="127.0.0.1" >
           <Context path="" 
                    docBase="webapps/examples" />
           <Context path="/examples" 
                    docBase="webapps/ROOT" />
        </Host>
         -->

    </ContextManager>
</Server>
