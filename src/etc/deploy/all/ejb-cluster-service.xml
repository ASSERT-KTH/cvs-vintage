<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE server>
<!-- $Id: ejb-cluster-service.xml,v 1.4 2003/07/22 15:21:04 cazzius Exp $ -->

<!-- ===================================================================== -->
<!--                                                                       -->
<!-- EJB services with generic clustering.                                 -->
<!-- Use only one of this or ejb-service.xml                               -->
<!-- ===================================================================== -->

<server>



  <!-- Load all jars from the JBOSS_DIST/server/<config>/lib directory. This
    can be restricted to specific jars by specifying them in the archives
    attribute.
   -->
  <classpath codebase="lib" archives="*"/>
  <classpath codebase="lib" archives="jbossha.jar"/>

  <!-- ==================================================================== -->
  <!-- Class Loading for rmi for ejbs                                       -->
  <!-- ==================================================================== -->

  <mbean code="org.jboss.web.WebService"
	 name="jboss:service=WebService">
    <attribute name="Port">8083</attribute>
    <!-- Should resources and non-EJB classes be downloadable -->
    <attribute name="DownloadServerClasses">true</attribute>
  </mbean>



  <!-- ==================================================================== -->
  <!-- The deployers...                                                     -->
  <!-- ==================================================================== -->

  <!-- EJB deployer, remove to disable EJB behavior-->
  <mbean code="org.jboss.ejb.EJBDeployer" name="jboss.ejb:service=EJBDeployer">
    <attribute name="VerifyDeployments">true</attribute>
    <attribute name="ValidateDTDs">false</attribute>
    <attribute name="MetricsEnabled">false</attribute>
    <attribute name="VerifierVerbose">true</attribute>

    <!--
        StrictVerifier: Setting this to 'true' will cause all deployments
        to fail when the Verifier detected a problem with the contained
        Beans.
    -->
    <attribute name="StrictVerifier">true</attribute>

    <depends>jboss.tm:service=TransactionManagerService</depends>
    <depends>jboss:service=WebService</depends>

    <!-- setting this dependency will allow for EJB2.1 Web Service Deployments -->
    <depends optional-attribute-name="WS4EEDeployer">jboss.net:service=WS4EEDeployer</depends>

  </mbean>

  <mbean code="org.jboss.deployment.XSLSubDeployer" name="jboss.ejb:service=ActivationSpecDeployer">
    <attribute name="PackageSuffix">.jar</attribute>
    <attribute name="DdNameToKeyMap">ejb-jar.xml=EJB_DD
       jboss.xml=JBOSS_EJB_DD</attribute>
    <attribute name="SourceDocumentKey">EJB_DD</attribute>
    <attribute name="TargetDocumentKey">SERVICES_DD</attribute>

    <!--attribute name="DependsXslUrl">stylesheets/ConnectionFactoryDependenciesTemplate.xsl</attribute-->

    <attribute name="XslUrl">stylesheets/JMSMDBTemplate.xsl</attribute>
    <depends optional-attribute-name="EntityResolverName">jboss.ejb:service=EJBEntityResolver</depends>
    <depends optional-attribute-name="URIResolverFactoryName">jboss.jca:service=RaURIResolver</depends>
    <depends optional-attribute-name="DelegateName">jboss.ejb:service=EJBDeployer</depends>
 </mbean>

   <mbean code="org.jboss.deployment.JBossEntityResolver" name="jboss.ejb:service=EJBEntityResolver">
    <attribute name="Catalog">
      <catalog>
        <entity publicId="-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 1.1//EN" file="org/jboss/metadata/ejb-jar.dtd"/>
        <entity publicId="-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN" file="org/jboss/metadata/ejb-jar_2_0.dtd"/>
        <entity publicId="-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.1//EN" file="org/jboss/metadata/ejb-jar_2_1.dtd"/>
        <entity publicId="-//JBoss//DTD JBOSS//EN" file="org/jboss/metadata/jboss.dtd"/>
        <entity publicId="-//JBoss//DTD JBOSS 2.4//EN" file="org/jboss/metadata/jboss_2_4.dtd"/>
        <entity publicId="-//JBoss//DTD JBOSS 3.0//EN" file="org/jboss/metadata/jboss_3_0.dtd"/>
        <entity publicId="-//JBoss//DTD JBOSS 3.1//EN" file="org/jboss/metadata/jboss_3_1.dtd"/>
        <entity publicId="-//JBoss//DTD JBOSS 3.2//EN" file="org/jboss/metadata/jboss_3_2.dtd"/>
        <entity publicId="-//JBoss//DTD JBOSS 4.0//EN" file="org/jboss/metadata/jboss_4_0.dtd"/>
      </catalog>
    </attribute>
  </mbean>

  <!-- ==================================================================== -->
  <!-- Monitoring and Management                                            -->
  <!-- ==================================================================== -->

  <!-- Uncomment to enable JMX monitoring of the bean cache
  <mbean code="org.jboss.monitor.BeanCacheMonitor" 
         name="jboss.monitor:name=BeanCacheMonitor"/>
  -->

  <!-- Uncomment to enable JMX monitoring of the entity bean locking
  <mbean code="org.jboss.monitor.EntityLockMonitor" 
         name="jboss.monitor:name=EntityLockMonitor"/>
  -->

  <!-- ==================================================================== -->
  <!-- EJB Invokers                                                         -->
  <!-- ==================================================================== -->

  <!--local invoker.  Can probably be replaced with a generic local invoker-->
  <mbean code="org.jboss.invocation.local.LocalInvoker" 
         name="jboss:service=invoker,type=local">
  </mbean>

  <!-- remoting framework invokers -->

  <!--remoting framework socket transport-->

  <mbean code="org.jboss.invocation.remoting.EJBSubsystemInvocationHandler"
         name="jboss.ejb:service=RemotingToEJBAdapter">
  </mbean>

  <mbean code="org.jboss.invocation.remoting.RemotingAdapter"
         name="jboss.ejb:service=RemotingAdapter">
    <depends optional-attribute-name="NextInterceptorName">jboss.cluster:service=ClientClusterChooserInterceptor</depends>
  </mbean>

  <mbean code="org.jboss.remoting.ServerInterceptorChain"
         name="jboss.ejb:service=EJBServerInterceptorChain,transport=Socket">
    <attribute name="Subsystem">EJB</attribute>
    <depends optional-attribute-name="ConnectorName">jboss.remoting:service=Connector,transport=Socket</depends>
    <depends-list optional-attribute-name="InterceptorNames">
      <depends-list-element>jboss.tm:service=XAWorkInterceptor</depends-list-element>
      <depends-list-element>jboss.cluster:service=ClusteredRemotingServerInterceptor</depends-list-element>
      <depends-list-element>jboss.ejb:service=RemotingToEJBAdapter</depends-list-element>
    </depends-list>
  </mbean>




</server>
