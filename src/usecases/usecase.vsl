<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!-- Content Stylesheet for Site -->

    ## Defined variables
    #set ($bodybg = "#ffffff")
    #set ($bodyfg = "#000000")
    #set ($bodylink = "#525D76")
    #set ($bannerbg = "#525D76")
    #set ($bannerfg = "#ffffff")
    #set ($subbannerbg = "#828DA6")
    #set ($subbannerfg = "#ffffff")
    #set ($tablethbg = "#039acc")
    #set ($tabletdbg = "#a0ddf0")
    
<!-- start the processing -->
#document()
<!-- end the processing -->

#macro ( projectanchor $name $value )
#if ($value.startsWith("http://"))
    <a href="$value">$name</a>
#elseif ($value.startsWith("/site"))
    <a href="http://scarab.tigris.org$value">$name</a>
#else
    <a href="$relativePath$value">$name</a>
#end
#end

#macro ( makeProject )
    #set ($menus = $project.getChild("body").getChildren("menu"))
    #foreach ( $menu in $menus )
        <p><strong>$menu.getAttributeValue("name")</strong></p>
        <font size="-2"><ul>
        #foreach ( $item in $menu.getChildren() )
            #if ( $velocityCount < 10 )
                #set ($itemCount = "0$velocityCount")
            #else
                #set ($itemCount = $velocityCount)
            #end
            #set ($name = $item.getAttributeValue("name"))
            <li>UC-$itemCount - 
            #projectanchor($name $item.getAttributeValue("href"))</li>
        #end
        </ul></font>
    #end
#end

#macro (section $section $title)
<table border="0" cellspacing="1" bgcolor="#cccccc">
  <tr>
    <td bgcolor="#ffffff" align="right" valign="top"><b>Name:</b></td>
        <td bgcolor="#ffffff" valign="top">UC-$root.getChild("number").getText() - $title</td>
  </tr>
  <tr>
    <td bgcolor="#ffffff" align="right" valign="top"><b>Extends:</b></td>
    <td bgcolor="#ffffff" valign="top">$section.getChild("extends").getText()</td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Description:</b></td>
    <td bgcolor="white" valign="top">$section.getChild("description").getText()</td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Feature(s):</b></td>
    <td bgcolor="white" valign="top">$section.getChild("features").getText()</td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Direct Actors:</b></td>
    <td bgcolor="white" valign="top">
    <ul>
    #foreach ( $actor in $section.getChild("players").getChildren() )
        <li>$actor.getAttributeValue("type") : $actor.getText()</li>
    #end
    </ul>
    </td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Stakeholders:</b></td>
    <td bgcolor="white" valign="top">
    <ul>
    #foreach ( $actor in $section.getChild("stakeholders").getChildren() )
        <li>$actor.getAttributeValue("name") : $actor.getText()</li>
    #end
    </ul>
    </td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>PreRequirements:</b></td>
    <td bgcolor="white" valign="top">
    <ul>
    #foreach ( $actor in $section.getChild("prerequirements").getChildren() )
        <li>$actor.getText()</li>
    #end
    </ul>
    </td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Result:</b></td>
    <td bgcolor="white" valign="top">$section.getChild("result").getText()</td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>DataSets:</b></td>
    <td bgcolor="white" valign="top">
    <ul>
    #foreach ( $actor in $section.getChild("datasets").getChildren() )
        <li>$actor.getText()</li>
    #end
    </ul>
    </td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Q/A:</b></td>
    <td bgcolor="white" valign="top">
    <ul>
    #foreach ( $actor in $section.getChild("faq").getChildren() )
        <li>$actor.getAttributeValue("q")
            <ul>
            <li><font color="green">$actor.getText()</font></li>
            </ul>
        </li>
    #end
    </ul>
    </td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Notes:</b></td>
    <td bgcolor="white" valign="top">
    <ul>
    #foreach ( $actor in $section.getChild("notes").getChildren() )
        <li>$actor.getText()</li>
    #end
    </ul>
    </td>
  </tr>
  <tr>
    <td bgcolor="white" align="right" valign="top"><b>Senario:</b></td>
    <td bgcolor="white" valign="top">
        $xmlout.outputString($section.getChild("scenario"), true)
    </td>
  </tr>
</table>

#end

#macro (document)
    <!-- ====================================================================== -->
    <!-- Main Page Section -->
    <!-- ====================================================================== -->
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
            <title>$project.getChild("title").getText() - $root.getChild("title").getText()</title>
        </head>

        <body bgcolor="$bodybg" text="$bodyfg" link="$bodylink">        
            <table border="0" width="100%" cellspacing="4">
                <tr><td colspan="2">
                    <hr noshade="" size="1"/>
                </td></tr>

                <tr>
                    <!-- LEFT SIDE NAVIGATION -->
                    <td width="20%" valign="top" nowrap="true">
                    #makeProject()
                    </td>
                    <td width="80%" align="left" valign="top">
                    #set ($allSections = $root.getChildren("section"))
                    #foreach ( $section in $allSections )
                        #section ($section $root.getChild("title").getText())
                    #end
                    </td>
                </tr>

                <!-- FOOTER -->
                <tr><td colspan="2">
                    <hr noshade="" size="1"/>
                </td></tr>
                <tr><td colspan="2">
                    <div align="center"><font color="$bodylink" size="-1"><em>
                    Copyright &#169; 2001, Scarab.tigris.org
                    </em></font></div>
                </td></tr>
            </table>

        </body>
    </html>
#end
