<?xml version="1.0" encoding="UTF-8"?>
<!--
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 - Copyright (C) 1999,2005 - INRIA (www.inria.fr)
 -
 - CAROL: Common Architecture for RMI ObjectWeb Layer
 -
 - This library is developed inside the ObjectWeb Consortium,
 - http://www.objectweb.org
 -
 - This library is free software; you can redistribute it and/or
 - modify it under the terms of the GNU Lesser General Public
 - License as published by the Free Software Foundation; either
 - version 2.1 of the License, or any later version.
 -
 - This library is distributed in the hope that it will be useful,
 - but WITHOUT ANY WARRANTY; without even the implied warranty of
 - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 - Lesser General Public License for more details.
 -
 - You should have received a copy of the GNU Lesser General Public
 - License along with this library; if not, write to the Free Software
 - Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307
 - USA
 -
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 - $Id: rmic_sun.xml,v 1.8 2005/03/10 10:07:04 benoitf Exp $
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 -->

<project name="rmic_sun" default="compile.all" basedir=".">

  <!-- Building of a path which contains carol jars for tests compilation-->
  <path id="sun.classpath">
    <fileset dir="${carol.dist}/lib">
      <include name="**/*.jar" />
    </fileset>
    <fileset dir="${externals}">
      <include name="**/*.jar" />
    </fileset>
    <pathelement location="${test.build}/classes" />
  </path>

  <target name="compile.all">
    <antcall target="compile.sun" />
  </target>

  <target name="compile.sun">
    <antcall target="compile.sunjrmp1.1" />
    <antcall target="compile.sunjrmp1.2" />
    <antcall target="compile.suniiop" />
  </target>

  <!-- Compile Remote Interface Stub/Skel target for Sun Rmi -->
  <target name="compile.sunjrmp1.1">
    <mkdir dir="${test.build.stub}/sunjrmp1.1" />
    <rmic base="${test.build.stub}/sunjrmp1.1"
          compiler="sun"
          stubversion="1.1"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicObject"
          sourcebase="${test.build.stub}/sunjrmp1.1">
      <classpath refid="sun.classpath" />
    </rmic>
    <rmic base="${test.build.stub}/sunjrmp1.1"
          compiler="sun"
          stubversion="1.1"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicMultiObject"
          sourcebase="${test.build.stub}/sunjrmp1.1">
      <classpath refid="sun.classpath" />
    </rmic>
    <rmic base="${test.build.stub}/sunjrmp1.1"
          compiler="sun"
          stubversion="1.1"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicRemoteObject"
          sourcebase="${test.build.stub}/sunjrmp1.1">
      <classpath refid="sun.classpath" />
    </rmic>
    <jar destfile="${test.dist.lib}/sunjrmp1.1.jar"
         basedir="${test.build.stub}/sunjrmp1.1" />
  </target>

  <!-- Compile Remote Interface Stub/Skel target for Sun Rmi -->
  <target name="compile.sunjrmp1.2">
    <mkdir dir="${test.build.stub}/sunjrmp1.2" />
    <rmic base="${test.build.stub}/sunjrmp1.2"
          compiler="sun"
          stubversion="1.2"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicObject"
          sourcebase="${test.build.stub}/sunjrmp1.2">
      <classpath refid="sun.classpath" />
    </rmic>
    <rmic base="${test.build.stub}/sunjrmp1.2"
          compiler="sun"
          stubversion="1.2"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicMultiObject"
          sourcebase="${test.build.stub}/sunjrmp1.2">
      <classpath refid="sun.classpath" />
    </rmic>
    <rmic base="${test.build.stub}/sunjrmp1.2"
          compiler="sun"
          stubversion="1.2"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicRemoteObject"
          sourcebase="${test.build.stub}/sunjrmp1.2">
      <classpath refid="sun.classpath" />
    </rmic>

    <jar destfile="${test.dist.lib}/sunjrmp1.2.jar"
         basedir="${test.build.stub}/sunjrmp1.2" />
  </target>

  <!--  Compile Remote Interface Stub/Skel target for Sun Rmi iiop -->
  <target name="compile.suniiop">
    <mkdir dir="${test.build.stub}/suniiop" />
    <rmic base="${test.build.stub}/suniiop"
          iiop="true"
          compiler="sun"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicObject"
          sourcebase="${test.build.stub}/suniiop">
      <classpath refid="sun.classpath" />
      <compilerarg value="-poa" />
    </rmic>
    <rmic base="${test.build.stub}/suniiop"
          iiop="true"
          compiler="sun"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicMultiObject"
          sourcebase="${test.build.stub}/suniiop">
      <classpath refid="sun.classpath" />
      <compilerarg value="-poa" />
    </rmic>
    <rmic base="${test.build.stub}/suniiop"
          iiop="true"
          compiler="sun"
          classname="org.objectweb.carol.jtests.conform.basic.server.BasicRemoteObject"
          sourcebase="${test.build.stub}/suniiop">
      <classpath refid="sun.classpath" />
      <compilerarg value="-poa" />
    </rmic>
    <jar destfile="${test.dist.lib}/suniiop.jar"
         basedir="${test.build.stub}/suniiop" />
  </target>
</project>
