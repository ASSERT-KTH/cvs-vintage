<project name="carol.all.test" default="test.all" >

  <property name="orb.initializer.class"
    value="-D.org.omg.PortableInterceptor.ORBInitializerClass.org.objectweb.owis.common.jtests.interceptor.iiop.IIOPInitilizer"/>

  <property name="transient.name.server"
    value="com.sun.corba.se.internal.CosNaming.TransientNameServer"/>

  <property name="manageable.registry"
    value="org.objectweb.carol.jndi.registry.ManageableRegistry"/>

  <property name="jrmi.registry"
    value="org.objectweb.jeremie.services.registry.JRMIRegistry"/>

  <!-- ************************************-->
  <!-- *********     TEST ALL    **********-->
  <!-- ************************************-->
  <target name="test.all"> 
    <antcall target="test.single"/> 
    <antcall target="test.multiple"/>
  </target>

  <target name="test.single"> 
    <antcall target="single.jeremie"/>
    <antcall target="single.iiop"/>
    <antcall target="single.jrmp1.1"/>
    <antcall target="single.jrmp1.2"/>

    <antcall target="single.nons.jeremie"/>
    <antcall target="single.nons.iiop"/>
    <antcall target="single.nons.jrmp1.1"/>
    <antcall target="single.nons.jrmp1.2"/>
    </target>

  <target name="test.multiple">
    <antcall target="multi.suniiop.jeremie"/>
    <antcall target="multi.suniiop.sunjrmp1.1"/>
    <antcall target="multi.suniiop.sunjrmp1.2"/>
    <antcall target="multi.sunjrmp1.1.suniiop"/>
    <antcall target="multi.sunjrmp1.2.suniiop"/> 
  
    <antcall target="multi.nons.suniiop.jeremie"/>
    <antcall target="multi.nons.suniiop.sunjrmp1.1"/>
    <antcall target="multi.nons.suniiop.sunjrmp1.2"/>
    <antcall target="multi.nons.sunjrmp1.1.suniiop"/>
    <antcall target="multi.nons.sunjrmp1.2.suniiop"/>
  </target>
 

  <!-- ************************************-->
  <!-- *********     TEST SINGLE    *******-->
  <!-- ************************************-->
  <target name="single.jeremie">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="jeremie_stub.jar"/>
      <property name="client.properties.file.name1" value="jeremie_carol.properties"/>
      <property name="server.properties.file.name" value="jeremie_carol.properties"/>
      <property name="name.server.class.name1" value="${jrmi.registry}"/>
      <property name="name.server.option1" value="2001"/>
      <property name="name.server.port1"   value="2001"/>
      <property name="test.name"          value="jeremie"/>
    </ant>
  </target>

  <target name="single.iiop">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="iiop_carol.properties"/>
      <property name="name.server.class.name1" value="${transient.name.server}"/>
      <property name="name.server.option1" value="-ORBInitialPort 2000"/>
      <property name="name.server.port1"   value="2000"/>
      <property name="test.name"          value="suniiop"/>
    </ant>
  </target> 


  <target name="single.jrmp1.1">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.1.jar"/>
      <property name="client.class.name" value=""/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="server.properties.file.name" value="jrmp_carol.properties"/>
      <property name="name.server.class.name1" value="${manageable.registry}"/>
      <property name="name.server.option1" value="1099"/>
      <property name="name.server.port1"   value="1099"/>
      <property name="test.name"          value="sunjrmp1.1"/>
    </ant>
  </target>

  <target name="single.jrmp1.2">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.2.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="server.properties.file.name" value="jrmp_carol.properties"/>
      <property name="name.server.class.name1" value="${manageable.registry}"/>
      <property name="name.server.option1" value="1099"/>
      <property name="name.server.port1"   value="1099"/>
      <property name="test.name"          value="sunjrmp1.2"/>
    </ant>
  </target> 
 
  <!-- ********************************************************-->
  <!-- *********     TEST SINGLE WITHOUT NAME SERVER    *******-->
  <!-- ********************************************************-->
  <target name="single.nons.jeremie">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="jeremie_stub.jar"/>
      <property name="client.properties.file.name1" value="jeremie_carol_nons.properties"/>
      <property name="server.properties.file.name" value="jeremie_carol_nons.properties"/>
      <property name="test.name"          value="jeremie.nons"/>
    </ant>
  </target>

   <target name="single.nons.iiop">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="iiop_carol_nons.properties"/>
      <property name="server.properties.file.name" value="iiop_carol_nons.properties"/>
      <property name="test.name"          value="suniiop.nons"/>
    </ant>
  </target> 

  <target name="single.nons.jrmp1.1">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.1.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol_nons.properties"/>
      <property name="server.properties.file.name" value="jrmp_carol_nons.properties"/>
      <property name="test.name"          value="sunjrmp1.1.nons"/>
    </ant>
  </target>

  <target name="single.nons.jrmp1.2">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.2.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol_nons.properties"/>
      <property name="server.properties.file.name" value="jrmp_carol_nons.properties"/>
      <property name="test.name"          value="sunjrmp1.2.nons"/>
    </ant>
  </target> 

  <!-- ************************************-->
  <!-- *********     TEST MULTI     *******-->
  <!-- ************************************-->
  <target name="multi.suniiop.jeremie">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="jeremie_stub.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jeremie_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisunjeremie_carol.properties"/>
      <property name="name.server.class.name1" value="${jrmi.registry}"/>
      <property name="name.server.option1" value="2001"/>
      <property name="name.server.port1"   value="2001"/>
      <property name="name.server.class.name2" value="${transient.name.server}"/>
      <property name="name.server.option2"  value="-ORBInitialPort 2000"/>
      <property name="name.server.port2"   value="2000"/>
      <property name="test.name"            value="multi_suniiop_jeremie"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value=""/>
    </ant>
  </target>  

  <target name="multi.suniiop.sunjrmp1.1">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.1.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun_carol.properties"/>
      <property name="name.server.class.name1" value="${manageable.registry}"/>
      <property name="name.server.option1" value="1099"/>
      <property name="name.server.port1"   value="1099"/>
      <property name="name.server.class.name2" value="${transient.name.server}"/>
      <property name="name.server.option2"  value="-ORBInitialPort 2000"/>
      <property name="name.server.port2"   value="2000"/>
      <property name="test.name"            value="multi_suniiop_sunjrmp1.1"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value=""/>
    </ant>
  </target> 

  <target name="multi.suniiop.sunjrmp1.2">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.2.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun_carol.properties"/>
      <property name="name.server.class.name1" value="${manageable.registry}"/>
      <property name="name.server.option1" value="1099"/>
      <property name="name.server.port1"   value="1099"/>
      <property name="name.server.class.name2" value="${transient.name.server}"/>
      <property name="name.server.option2"  value="-ORBInitialPort 2000"/>
      <property name="name.server.port2"   value="2000"/>
      <property name="test.name"            value="multi_suniiop_sunjrmp1.2"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value="${orb.initializer.class}"/>
    </ant>
  </target> 

  <target name="multi.sunjrmp1.1.suniiop">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.1.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun2_carol.properties"/>
      <property name="name.server.class.name1" value="${manageable.registry}"/>
      <property name="name.server.option1" value="1099"/>
      <property name="name.server.port1"   value="1099"/>
      <property name="name.server.class.name2" value="${transient.name.server}"/>
      <property name="name.server.option2"  value="-ORBInitialPort 2000"/>
      <property name="name.server.port2"   value="2000"/>
      <property name="test.name"            value="multi_sunjrmp1.1_suniiop"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value="${orb.initializer.class}"/>
    </ant>
  </target>  

  <target name="multi.sunjrmp1.2.suniiop">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.2.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun2_carol.properties"/>
      <property name="name.server.class.name1" value="${manageable.registry}"/>
      <property name="name.server.option1" value="1099"/>
      <property name="name.server.port1"   value="1099"/>
      <property name="name.server.class.name2" value="${transient.name.server}"/>
      <property name="name.server.option2"  value="-ORBInitialPort 2000"/>
      <property name="name.server.port2"   value="2000"/>
      <property name="test.name"            value="multi_sunjrmp1.2_suniiop"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value="${orb.initializer.class}"/>
    </ant>
  </target>
 
  <!-- ********************************************************-->
  <!-- *********     TEST MULTI WITHOUT NAME SERVERS    *******-->
  <!-- ********************************************************-->
  <target name="multi.nons.suniiop.jeremie">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="jeremie_stub.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jeremie_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisunjeremie_carol_nons.properties"/>
      <property name="test.name"            value="multi_suniiop_jeremie.nons"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value=""/>
    </ant>
  </target>  

  <target name="multi.nons.suniiop.sunjrmp1.1">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.1.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun_carol_nons.properties"/>
      <property name="test.name"            value="multi_suniiop_sunjrmp1.1.nons"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value=""/>
    </ant>
  </target> 

  <target name="multi.nons.suniiop.sunjrmp1.2">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.2.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun_carol_nons.properties"/>
      <property name="test.name"            value="multi_suniiop_sunjrmp1.2.nons"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value="${orb.initializer.class}"/>
    </ant>
  </target> 

  <target name="multi.nons.sunjrmp1.1.suniiop">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.1.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun2_carol_nons.properties"/>
      <property name="test.name"            value="multi_sunjrmp1.1_suniiop.nons"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value="${orb.initializer.class}"/>
    </ant>
  </target>  

  <target name="multi.nons.sunjrmp1.2.suniiop">
    <ant antfile="conform/generic/carol_double.xml">
      <property name="stub.jar.name1" value="sunjrmp1.2.jar"/>
      <property name="stub.jar.name2" value="suniiop.jar"/>
      <property name="client.properties.file.name1" value="jrmp_carol.properties"/>
      <property name="client.properties.file.name2" value="iiop_carol.properties"/>
      <property name="server.properties.file.name" value="multisun2_carol_nons.properties"/>
      <property name="test.name"            value="multi_sunjrmp1.2_suniiop.nons"/>
      <property name="test.client.jvm.xtra1" value=""/>
      <property name="test.client.jvm.xtra2" value="${orb.initializer.class}"/>
    </ant>
  </target> 

</project>
