<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 10 (filtered)">
<title>Tiles Framework</title>

<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
h1
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:21.6pt;
	text-align:justify;
	text-indent:-21.6pt;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:Arial;}
h2
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-indent:-28.8pt;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
h3
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-indent:-36.0pt;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:Arial;}
h4
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:43.2pt;
	text-align:justify;
	text-indent:-43.2pt;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman";}
h5
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:50.4pt;
	text-align:justify;
	text-indent:-50.4pt;
	font-size:13.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
h6
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:57.6pt;
	text-align:justify;
	text-indent:-57.6pt;
	font-size:11.0pt;
	font-family:"Times New Roman";}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:64.8pt;
	text-align:justify;
	text-indent:-64.8pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:72.0pt;
	text-align:justify;
	text-indent:-72.0pt;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:79.2pt;
	text-align:justify;
	text-indent:-79.2pt;
	font-size:11.0pt;
	font-family:Arial;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:12.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:48.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:96.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
span.MsoPageNumber
	{font-family:Arial;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:16.0pt;
	font-family:Arial;
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	background:navy;
	font-size:12.0pt;
	font-family:Tahoma;}
p.CodewithBorder, li.CodewithBorder, div.CodewithBorder
	{margin:0cm;
	margin-bottom:.0001pt;
	border:none;
	padding:0cm;
	font-size:8.0pt;
	font-family:Courier;}
span.code
	{font-family:"Courier New";}
p.picture10, li.picture10, div.picture10
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Times New Roman";}
p.Filenameandpath, li.Filenameandpath, div.Filenameandpath
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=FR link=blue vlink=purple>

<div class=Section1>

<p class=MsoTitle><a name="_Toc521292368"></a><a name="_Toc513222148"><span
lang=EN-US>Tiles (Components)<br>
Tutorial v0.</span></a><span lang=EN-US>4</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US>Author
: <a href="mailto:cedric.dumoulin@lifl.fr">Cedric Dumoulin</a></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US>Date
: </span><span
lang=EN-US>14 Nov. 2000</span></p>

<p class=MsoFooter align=center style='text-align:center'><span lang=EN-US>Rev
: </span><span lang=EN-US>1 Aug. 2001</span></p>

<p class=MsoFooter align=center style='text-align:center'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoFooter><span lang=EN-US>Latest version (Web site) : <a
href="http://www.lifl.fr/~dumoulin/tiles">http://www.lifl.fr/~dumoulin/tiles</a></span></p>

<p class=MsoFooter align=center style='text-align:center'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoToc1><b><span lang=EN-US>Table of Content</span></b></p>

<p class=MsoToc1><span lang=EN-US><span class=MsoHyperlink><a
href="#_Toc521292368">Tiles (Components) Tutorial v0.4<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292369">1<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Warning<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292370">2<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Tutorial overview<span style='color:windowtext;display:none;
text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292371">3<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Setup your development environment<span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292372">4<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Write your first page<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292373">4.1<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Plan your tiles and main layout<span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292374">4.2<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Write Tiles<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292375">4.3<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Assemble Tiles in a Page<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292376">4.4<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Try Your Page<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292377">5<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Reuse Existing Layouts<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292378">5.1<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Classic Layout / template<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292379">5.2<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Portal<span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292380">5.3<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Vertical Boxes<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292381">6<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Definitions<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292382">6.1<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Declare Definitions<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292383">6.2<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Use Definitions<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292384">6.3<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Set Web Application Configuration<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292385">6.4<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Definitions as Component Parameters<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292386">6.5<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Extended Definitions<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>15</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292387">6.6<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Definitions as Forward<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>15</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292388">7<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Write More Complex Components<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>17</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292389">7.1<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Submenu Component<span style='color:windowtext;display:
none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>17</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292390">7.2<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>View Sources Component<span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>18</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292391">7.3<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Body Including Twice the Same Component<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>18</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292392">8<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Internationalization (i18n)<span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>21</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292393">8.1<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Select Language Menu<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>22</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292394">8.2<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Select Language Action<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>22</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292395">8.3<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Localized Definition Descriptions Files<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>23</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292396">8.4<span lang=FR style='color:windowtext;text-decoration:
none'>       </span>Try Your Pages<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>24</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc521292397">9<span lang=FR style='color:windowtext;text-decoration:
none'>      </span>Multi-Channels<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>24</span></a></span></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc513222149"></a><a name="_Toc521292369"><span lang=EN-US
style='color:red'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US style='color:red'>Warning</span></span></a></h1>

<p class=MsoNormal><i><span lang=EN-US>Tiles</span></i><span lang=EN-US>
framework was previously called <i>Components</i> framework. This tutorial was
written for Components. It is totally compatible with Tiles, only name components
has to be changed to tiles.</span></p>

<p class=MsoNormal><span lang=EN-US>Rewriting of this document is a work in
progress. If you want to use it today, be indulgent, and change yourself
components to tiles.</span></p>

<h1><a name="_Toc521292370"><span lang=EN-US>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Tutorial overview</span></span></a><span
lang=EN-US> </span></h1>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>This tutorial shows you how to write and
use Tiles to define a Web site. Use this tutorial to learn the basic skills
you'll need to develop a Web site and to learn about some of the features of
the Tiles Framework. </span></p>

<p class=MsoNormal><span lang=EN-US>In this tutorial, you will create a
fictitious web site, with pages illustrating Tiles features : basic page,
portal page, definitions, i18n.  </span></p>

<p class=MsoNormal><span lang=EN-US>This tutorial cover the view part of the
UI, it doesnt cover the model and controller part of the MVC 2 model.</span></p>

<p class=MsoNormal><span lang=EN-US>Along the way, you'll learn how to perform
the following tasks: </span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span lang=EN-US>Build a page</span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span lang=EN-US>Identify tiles</span></li>
  <li class=MsoNormal><span lang=EN-US>Write your tiles</span></li>
  <li class=MsoNormal><span lang=EN-US>Assemble tiles</span></li>
  <li class=MsoNormal><span lang=EN-US>Write a layout tiles</span></li>
 </ul>
 <li class=MsoNormal><span lang=EN-US>Reuse existing layouts / templates</span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span lang=EN-US>Reuse classic layout</span></li>
  <li class=MsoNormal><span lang=EN-US>Reuse portal layout</span></li>
  <li class=MsoNormal><span lang=EN-US>Reuse vertical boxes layout</span></li>
 </ul>
 <li class=MsoNormal><span lang=EN-US>Use screen or tiles definitions</span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span lang=EN-US>Declare and use definitions</span></li>
  <li class=MsoNormal><span lang=EN-US>Extends definitions</span></li>
  <li class=MsoNormal><span lang=EN-US>Definitions as tile parameters</span></li>
  <li class=MsoNormal><span lang=EN-US>Struts and definitions</span></li>
 </ul>
 <li class=MsoNormal><span lang=EN-US>Design intelligent tiles</span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span lang=EN-US>Build new layouts</span></li>
  <li class=MsoNormal><span lang=EN-US>Reusable sub-menu</span></li>
  <li class=MsoNormal><span lang=EN-US>Reusable tiles (included twice)</span></li>
  <li class=MsoNormal><span lang=EN-US>View sources tiles and menu</span></li>
 </ul>
 <li class=MsoNormal><span lang=EN-US>Create i18n tiles</span></li>
</ul>

<h1><a name="_Toc521292371"></a><a name="_Toc513222150"><span lang=EN-US>3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Setup your development environment</span></span></a></h1>

<p class=MsoNormal><span lang=EN-US>In order to run examples of this tutorial,
you need to install a JSP server, like Tomcat. You also need the Tiles Library,
the Struts Library, and some jar files from the Jakarta Commons project. If you
have downloaded Tiles binary distribution, you already got all needed files. </span></p>

<p class=MsoNormal><span lang=EN-US>We suppose that you have some basic
knowledge of web development, JSP and JSP tags.</span></p>

<p class=MsoNormal><span lang=EN-US>Examples of this tutorial are in the Tiles
distribution file. </span></p>

<p class=MsoNormal><span lang=EN-US>However, we advise you to write yourself
the examples. For that, you can create a directory under the web server </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>webapps</span></span><span
lang=EN-US> directory (call it </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>tutorial</span></span><span lang=EN-US>), and put all
your files and sub-directories under this directory.</span></p>

<p class=MsoNormal><span lang=EN-US>In order to avoid rewriting configurations
files, you can copy the complete WEB-INF directory from the tutorial to your
directory.</span></p>

<h1><a name="_Toc521292372"></a><a name="_Toc513222151"><span lang=EN-US>4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Write your first page</span></span></a></h1>

<p class=MsoNormal><span lang=EN-US>Your first page is a simple page that will
be improved later in this tutorial.</span></p>

<h2><a name="_Toc521292373"></a><a name="_Toc513222152"></a><a
name="_Plan_your_components"></a><span lang=EN-US>4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Plan your tiles and main layout</span></span></h2>

<p class=MsoNormal><span lang=EN-US>Your first page look like the following
picture :</span></p>

<p class=MsoNormal><img width=150 height=174
src="tutorialBody_fichiers/image001.gif"><br clear=ALL>
</p>

<p class=MsoNormal><span lang=EN-US>It is divided in header, footer, menu and
body. Such division identifies our main <b><i>tiles</i> </b>: </span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span lang=EN-US>header : containing company logo</span></li>
 <li class=MsoNormal><span lang=EN-US>footer : containing copyrights</span></li>
 <li class=MsoNormal><span lang=EN-US>menu : containing direct links to others
     pages</span></li>
 <li class=MsoNormal><span lang=EN-US>body : the main area of the page</span></li>
</ul>

<p class=MsoNormal><span lang=EN-US>These tiles are assembled together using a <i>layout
</i>or<i> template</i>. This layout is also a <i>tile</i>. As layouts are often
used, there exists a library of layouts. But, in this tutorial, you will learn
how to write simple layout.</span></p>

<p class=MsoNormal><span lang=EN-US>Once you have your main tiles and your
layout, you need to set up your web page main entrance (i.e. : define the web
page  that will process the http request). This can simply be done in a jsp
file. </span></p>

<p class=MsoNormal><span lang=EN-US>Starting from the page main entrance, we
can draw a tree of tiles, like the following :</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><img width=210 height=126
src="tutorialBody_fichiers/image002.gif"><br clear=ALL>
<span lang=EN-US>You will next learn how to write these tiles, the layout, and
the page entrance.</span></p>

<h2><a name="_Toc521292374"></a><a name="_Toc513222153"><span lang=EN-US>4.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Write </span></span></a><span lang=EN-US>Tiles</span></h2>

<p class=MsoNormal><i><span lang=EN-US>Covered topics : write simple tiles; the
html link problem.</span></i></p>

<h3><a name="_Toc513222154"><span lang=EN-US>4.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Header</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Your header will contain the company logo.</span></p>

<p class=MsoNormal><span lang=EN-US>Copy directory </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>tutorial/images</span></span><span
lang=EN-US> from the distribution tutorial directory to your examples root
directory.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new blank file, and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>tutorial/common/header.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Edit your new file, and place your images,
as in following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;a
href=&quot;http://www.mycompany.com&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  
&lt;img src=&quot;/tutorial/images/headerLeft-logo.gif&quot;
align=&quot;left&quot; border=&quot;0&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/a&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;img
src=&quot;/tutorial /images/headerRight-logo.gif&quot; align=&quot;right&quot;
border=&quot;0&quot;&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You can note that images path is absolute
(starting with /). You need to use an absolute path because this component
can be included from pages residing at different places, not always at your
site root.</span></p>

<h4><span lang=EN-US>4.2.1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>The html link problem</span></span></h4>

<p class=MsoNormal><span lang=EN-US>Using simple absolute path work fine if your
web site is placed directly at the root of your domain name (i.e. : at www.mycompany.com).
If your web site is under a subdomain (i.e. : at www.mycompany.com/my_site), as
it is often the case, you need to prefix this path with the subdomain name
(my_site). In order to have a portable site, you can retrieve the subdomain
name from the http request. </span></p>

<p class=MsoNormal><span lang=EN-US>Our component becomes :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;a
href=&quot;http://www.mycompany.com&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  
&lt;img src=&quot;&lt;%=request.getContextPath()%&gt;/tutorial/images/headerLeft-logo.gif&quot;
align=&quot;left&quot; border=&quot;0&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/a&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;img
src=&quot;&lt;%=request.getContextPath()%&gt;/tutorial/images/headerRight-logo.gif&quot;
align=&quot;right&quot; border=&quot;0&quot;&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>It is a good habit to prefix absolute links
used in client side (html links) by the subdomain name, retrieved from the http
request. In this tutorial, you will always prefix html links with subdomain
name.</span></p>

<p class=MsoNormal><span lang=EN-US>If you also plan to use Struts, you can use
the </span><span class=code><span lang=EN-US style='font-size:10.0pt'>&lt;link&gt;</span></span><span
lang=EN-US> or </span><span class=code><span lang=EN-US style='font-size:10.0pt'>&lt;img&gt;</span></span><span
lang=EN-US> tag defined in html tags library.</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts-html.tld&quot; prefix=&quot;html&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;a
href=&quot;http://www.mycompany.com&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  
&lt;html:img src=&quot;/tutorial/images/headerLeft-logo.gif&quot;
align=&quot;left&quot; border=&quot;0&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/a&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;html:img
src=&quot;/tutorial/images/headerRight-logo.gif&quot; align=&quot;right&quot;
border=&quot;0&quot;&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc513222155"><span lang=EN-US>4.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Footer</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>The footer contains company copyrights.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file, and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>tutorial/common/footer.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Write copyrights notice, as in following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;div
align=&quot;center&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;font color=&quot;#023264&quot; size=&quot;-1&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;em&gt;         Copyright &amp;copy; 2001, MyCompany         &lt;/em&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/div&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;img
src=&quot;&lt;%=request.getContextPath()%&gt;/tutorial/images/struts-power.gif&quot;
  align=&quot;right&quot; border=&quot;0&quot;&gt;</span></p>

</div>

<h3><a name="_Toc513222156"><span lang=EN-US>4.2.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Menu</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>The menu contains links to other pages. For
now, you just write a simple menu. You will create more sophisticated menus
later in this tutorial.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file, and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>tutorial/basic/menu.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Now, you can create your menu : create a
table, with tree rows. Normally, each row contains a link to a page. Here, only
first row contains link to the main page.</span></p>

<p class=MsoNormal><span lang=EN-US>Your code should looks like the following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;table&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr
bgcolor=&quot;Blue&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    Menu</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td width=&quot;120&quot; valign=&quot;top&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;font size=&quot;-1&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>      &lt;a
href=&quot;&lt;%=request.getContextPath()%&gt;/tutorial/index.jsp&quot;&gt;Home&lt;/a&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    &lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td width=&quot;120&quot; valign=&quot;top&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;font size=&quot;-1&quot;&gt;Item 2&lt;/a&gt;&lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td width=&quot;120&quot; valign=&quot;top&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;font size=&quot;-1&quot;&gt;Item 3&lt;/a&gt;&lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/table&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc513222157"><span lang=EN-US>4.2.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Body</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>The body is the active part of your pages.
For now, you will develop a simple body writing the classic sentence Hello the
World. You will develop other bodies later.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file, and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>tutorial/basic/hello.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>In your file, write Hello the World.</span></p>

<p class=MsoNormal><span lang=EN-US>The code should looks like the following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;div
align=&quot;center&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;font size=&quot;+1&quot;&gt;&lt;b&gt;Hello the World&lt;/b&gt;&lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/div&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc521292375"></a><a name="_Toc513222158"><span lang=EN-US>4.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Assemble Tiles in a Page</span></span></a></h2>

<p class=MsoNormal><i><span lang=EN-US>Covered topics : passing parameters,
basic layout understanding, assembling tiles in layout, insert tag mechanism
understanding. Retrieving parameter values</span></i><span lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Now, you will assemble your <i>tiles</i>.
For that, you will develop a <i>tile</i> taking in charge the layout, and
including previously developed <i>tiles</i> where you want them to reside. This
<i>tile</i> can be seen as a <i>Template</i>. </span></p>

<p class=MsoNormal><span lang=EN-US>In order for your <i>layout tile</i> to be
reusable, you will pass it <i>tiles</i> to be inserted as parameters.</span></p>

<h3><a name="_Toc513222159"><span lang=EN-US>4.3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Passing Parameters</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>To pass parameters to the <i>tile</i> that
will do the layout, you write something like that :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/basic/myLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;title&quot;  value=&quot;My first page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;footer&quot; value=&quot;/tutorial/common/footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;menu&quot;   value=&quot;/tutorial/basic/menu.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;body&quot;   value=&quot;/tutorial/basic/helloBody.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Or like the following, which is the same,
but looks like more familiar to people already using Struts Template :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;template&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;template:insert
page=&quot;/basic/myLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;template:put name=&quot;title&quot;  value=&quot;My first page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;template:put name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;template:put name=&quot;footer&quot; value=&quot;/tutorial/common/footer.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;template:put name=&quot;menu&quot;   value=&quot;/tutorial/basic/menu.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;template:put name=&quot;body&quot;   value=&quot;/tutorial/basic/helloBody.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/template:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file, write previous line of
code and save it under </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>tutorial/basicPage.jsp</span></span><span lang=EN-US>.
</span></p>

<p class=MsoNormal><span lang=EN-US>The first line instructs the web server to
use the tiles tag library. It also specifies that all tags from this library
will start with the prefix </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>tiles</span></span><span lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>The tag itself specifies the tiles <i>page</i>
to insert : </span><span class=code><span lang=EN-US style='font-size:10.0pt'>/tutorial/basic/myLayout.jsp</span></span><span
lang=EN-US>. You will develop this <i>tile</i> in a few moments. We pass
parameters to this <i>tile</i>, each one is identified by a name. The value can
be of any type. Here we use hard-coded strings.</span></p>

<p class=MsoHeader><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc513222160"><span lang=EN-US>4.3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Write Layout / Template</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>First, create a new file, and save it under
</span><span class=code><span lang=EN-US style='font-size:10.0pt'>tutorial/basic/myLayout.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>In this file, create a table reflecting
your layout, as describe in <a
href="../word/tutorial-v0.3.doc#Plan your tiles and main layout">Plan your components
and main layout</a>.</span></p>

<p class=MsoNormal><span lang=EN-US>The code looks like this :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;html&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;head&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>        &lt;title&gt;&lt;/title&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/head&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;body&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;TABLE
width=&quot;100%&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD colspan=&quot;2&quot;&gt;header&lt;/TD&gt;&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD width=&quot;120&quot;&gt;menu&lt;/TD&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD&gt;body&lt;/TD&gt;&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD colspan=&quot;2&quot;&gt;footer&lt;/TD&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/TABLE&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/body&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/html&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Note : This layout contains </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>&lt;html&gt;, &lt;head&gt;
and &lt;body&gt;</span></span><span lang=EN-US> tags. This <i>tile</i> is used
to define the html page.</span></p>

<h3><a name="_Toc513222161"><span lang=EN-US>4.3.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Insert </span></span></a><span
lang=EN-US>Tiles</span></h3>

<p class=MsoNormal><span lang=EN-US>Now, you will insert (include) <i>tiles</i>
by using special tags. </span></p>

<p class=MsoNormal><span lang=EN-US>Put the following code at the beginning of
your page :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This instruct jsp processor to use the
special tags library <br>
</span><span class=code><span lang=EN-US style='font-size:10.0pt'>&quot;/WEB-INF/tiles.tld&quot;,</span></span><span
lang=EN-US>and that tags will be prefixed by </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>tiles</span></span><span lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Next, you can insert your <i>tiles</i> by
using following tag :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
attribute=body flush=true /&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This tag inserts a <i>tile</i> whose name
is taken from the value of the attribute body. It is why you must use </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>attribute=</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Do the same for each of your tile. The code
should looks like :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;TABLE
width=&quot;100%&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD colspan=&quot;2&quot;&gt;&lt;tiles:insert attribute=&quot;header&quot;
/&gt;&lt;/TD&gt;&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD width=&quot;120&quot;&gt;&lt;tiles:insert attribute=&quot;menu&quot;
/&gt;&lt;/TD&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD&gt;&lt;tiles:insert attribute=&quot;body&quot;
/&gt;&lt;/TD&gt;&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD colspan=&quot;2&quot;&gt;&lt;tiles:insert attribute=&quot;footer&quot;
/&gt;&lt;/TD&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/TABLE&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<h3><a name="_Toc513222162"><span lang=EN-US>4.3.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Set Page Title</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Your layout <i>tile</i> will be used
several times. But you certainly want a different title for each page using
this layout. For that, you will pass the page title as a parameter. In the
layout, you extract the title from tiles parameters, and put the value in the
correct place :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;head&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;title&gt;&lt;tiles:getAsString name=&quot;title&quot;/&gt;&lt;/title&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/head&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Tag </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>getAsString</span></span><span lang=EN-US>
(formerly </span><span class=code><span lang=EN-US style='font-size:10.0pt'>getAttribute</span></span><span
lang=EN-US>) retrieves the value of a tiles attribute, and write it directly
as a string. So, the tag will be replaced by the value you passed to the <i>tile</i>.</span></p>

<h3><a name="_Toc513222163"><span lang=EN-US>4.3.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Complete code</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Following is the complete code for your
first layout tile :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;html&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;head&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;title&gt;&lt;tiles:getAsString name=&quot;title&quot;/&gt;&lt;/title&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/head&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;body&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;TABLE
width=&quot;100%&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD colspan=&quot;2&quot;&gt;&lt;tiles:insert attribute=&quot;header&quot;
/&gt;&lt;/TD&gt;&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD width=&quot;120&quot;&gt;&lt;tiles:insert attribute=&quot;menu&quot;
/&gt;&lt;/TD&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD&gt;&lt;tiles:insert attribute=&quot;body&quot;
/&gt;&lt;/TD&gt;&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;TD colspan=&quot;2&quot;&gt;&lt;tiles:insert attribute=&quot;footer&quot;
/&gt;&lt;/TD&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/TR&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/TABLE&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/body&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/html&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc521292376"></a><a name="_Toc513222164"><span lang=EN-US>4.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Try Your Page</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>You can test your page by starting your web
server, and pointing to your newly created page basicPage.jsp. </span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Note : your configuration files must be set
correctly before starting the web server. For now, you can simply copy the
entire WEB-INF directory in your tutorial directory.</span></p>

<h1><a name="_Toc521292377"></a><a name="_Toc513222165"><span lang=EN-US>5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Reuse Existing Layouts</span></span></a></h1>

<p class=MsoNormal><i><span lang=EN-US>Covered topics : Reuse layouts</span></i><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Assembling of tiles is often done in the
same way. It is possible to develop some basic layouts and reuse them inside a
web site, or even from site to site. Provided examples come with some layouts :
classic layout, portal (columns), vertical boxes. </span></p>

<p class=MsoNormal><span lang=EN-US>You will first learn how to reuse such
layouts. In a later chapter, you will learn how to build your own layouts.</span></p>

<h2><a name="_Toc521292378"></a><a name="_Toc513222166"><span lang=EN-US>5.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Classic Layout / template</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>The most common layout for a page is the <i>header
/ menu / body / footer</i> layout. We provide one of this layout under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/tutorial/layout/classicLayout.jsp</span></span><span
lang=EN-US>. You can use it in place of your previously defined layout : simply
change the name of included tile in </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>basicPage.jsp</span></span><span lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/layout/classicLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;title&quot;  value=&quot;My first page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;footer&quot; value=&quot;/tutorial/common/footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;menu&quot;   value=&quot;/tutorial/basic/menu.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;body&quot;   value=&quot;/tutorial/basic/helloBody.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Note that there is no change in the passed
parameters. In the same way, you can change the way a layout component laid
sub-components. If well designed, you can change all site look and feel simply
by changing main layout component !</span></p>

<h2><a name="_Toc521292379"></a><a name="_Toc513222167"><span lang=EN-US>5.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Portal</span></span></a></h2>

<p class=MsoNormal><i><span lang=EN-US>Covered topics : use of layout inside tiles,
list as parameter to a tile</span></i><span lang=EN-US>.</span></p>

<p class=MsoHeader><span lang=EN-US> </span></p>

<p class=MsoNormal><span lang=EN-US>Here, you will learn how to build a portal
by assembling tiles.</span></p>

<p class=MsoNormal><span lang=EN-US>A portal is made of tiles, stacked  into
columns. Portal page use the layout common to all site. So, you only need to
define the body of your portal page.</span></p>

<p class=MsoNormal><span lang=EN-US>This body uses a <i>tile</i> that lay sub <i>tiles</i>
in columns. You need to pass as parameters the number of columns you want, and a
list of tiles for each column.</span></p>

<h3><a name="_Toc513222168"><span lang=EN-US>5.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Prepare Portal </span></span></a><span
lang=EN-US>Tiles</span></h3>

<p class=MsoNormal><span lang=EN-US>First, you need to define some tiles to
assemble in your page. You can define your own tiles, or copy the one defined
in the tutorial (under </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>tutorial/portal/*</span></span><span lang=EN-US>).</span></p>

<p class=MsoNormal><span lang=EN-US>Copy tiles from directory </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>portal/*</span></span><span
lang=EN-US> in your tutorial directory (keep the sub directory </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>portal</span></span><span
lang=EN-US> ).</span></p>

<h3><a name="_Toc513222169"><span lang=EN-US>5.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Assemble Portal </span></span></a><span
lang=EN-US>Tiles</span></h3>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>tutorial/portal/portalBody.jsp</span></span><span
lang=EN-US>. </span></p>

<p class=MsoNormal><span lang=EN-US>Include the portal layout (called </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/tutorial/layout/columnsLayout.jsp</span></span><span
lang=EN-US>), passing it the requested number of columns, and a list of <i>tiles</i>
for each column. List names must be </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>listX</span></span><span lang=EN-US>, where </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>X</span></span><span
lang=EN-US> is the index of the list, starting at zero.</span></p>

<p class=MsoNormal><span lang=EN-US>Your code looks like following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/tutorial/layout/columnsLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;numCols&quot; value=&quot;2&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:putList
name=&quot;list0&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/login.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/messages.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/newsFeed.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/advert2.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tiles:putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:putList
name=&quot;list1&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/advert3.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/stocks.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/whatsNew.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/personalLinks.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/search.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tiles:putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>In this code, you declare three attributes
: one variable and two lists. Values are added to the list in the specified order.
Here, you add sub-tiles URLs. It is possible to add definitions name instead
(see definitions).</span></p>

<h3><a name="_Toc513222170"><span lang=EN-US>5.2.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Set up web page</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You can now include your portal body in any
tiles. Preferably, you will include it in a page using the main layout.</span></p>

<p class=MsoNormal><span lang=EN-US>Create the page in a new file called </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/tutorial/portalPage.jsp</span></span><span
lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/tutorial/layout/classicLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;title&quot;  value=&quot;My First Portal Page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;footer&quot; value=&quot;/tutorial/common/footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;menu&quot;   value=&quot;/tutorial/basic/menu.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;body&quot;   value=&quot;/tutorial/portal/portalBody.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Note that you use classicLayout.jsp
rather than your myLayout.jsp. Both layouts are nearly the same, except than
classicLayout include a style sheet used in the entire site.</span></p>

<p class=MsoNormal><span lang=EN-US>Check result by pointing your browser on
the page.</span></p>

<h2><a name="_Toc521292380"></a><a name="_Toc513222171"><span lang=EN-US>5.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Vertical Boxes</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>We often need to put tiles one under the
others. The vertical boxes layout (</span><span class=code><span lang=EN-US
style='font-size:10.0pt'>/tutorial/layout/vboxLayout.jsp</span></span><span
lang=EN-US>) does exactly that. You pass it a list of <i>tiles</i>, and it laid
them vertically.</span></p>

<p class=MsoNormal><span lang=EN-US>As an example, we will improve the menu :
it will now be made of three <i>tiles</i> : one showing an image, one providing
links to pages and one providing links to a tile writing sources.</span></p>

<h3><a name="_Toc513222172"><span lang=EN-US>5.3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Assemble </span></span></a><span
lang=EN-US>Tiles</span></h3>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/tutorial/common/menu.jsp</span></span><span
lang=EN-US>. In this file, include the </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>vboxLayout</span></span><span lang=EN-US> tile,
and pass it a list with sub-tiles URLs.</span></p>

<p class=MsoNormal><span lang=EN-US>Your code should looks like :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/tutorial/layout/vboxLayout.jsp&quot; flush=&quot;true&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:putList
name=&quot;componentsList&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/common/menu/menuLogo.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    &lt;tiles:add
value=&quot;/tutorial/common/menu/menuLinks.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/common/menu/menuSrc.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tiles:putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>The </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>vboxLayout</span></span><span lang=EN-US> tile
requires one parameter called </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>componentList</span></span><span lang=EN-US>. It is a
list of URLs referencing sub-tiles to insert. Of course, you need to have such <i>tiles</i>.</span></p>

<p class=MsoNormal><b><span lang=EN-US>MenuLogo.jsp</span></b></p>

<p class=MsoNormal><span lang=EN-US>Following is the code of this tile :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;img
src=&quot;&lt;%=request.getContextPath()%&gt;/tutorial/images/struts-power.gif&quot;
width=&quot;95&quot; height=&quot;37&quot; border=&quot;0&quot;
alt=&quot;&quot;&gt;</span></p>

</div>

<p class=MsoNormal><b><span lang=EN-US>MenuLinks.jsp</span></b></p>

<p class=MsoNormal><span lang=EN-US>Following is the code of this tile :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/tutorial/common/submenu.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;title&quot; value=&quot;Main Menu&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:putList
name=&quot;items&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;Home&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;Basic Page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;First Portal&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tiles:putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:putList
name=&quot;links&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/index.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/basicPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portalPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tiles:putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This <i>tile</i> uses another <i>tile</i>, </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>submenu.jsp</span></span><span
lang=EN-US>. This later takes a list of items and a list of links as
parameters, and shows them in a menu fashion. You will learn later how to write
the submenu <i>tile</i>. For now, copy it from the original </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/tutorial/common</span></span><span
lang=EN-US> directory to your </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>/tutorial/common/submenu.jsp</span></span></p>

<p class=MsoNormal><b><span lang=EN-US>MenuSrc.jsp</span></b></p>

<p class=MsoNormal><span lang=EN-US>Following is the code of this tile :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/tutorial/common/menuViewSrc.jsp&quot; flush=&quot;true&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:putList
name=&quot;list&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/basicPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portalPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/portal/portalBody.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/common/header.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/common/menu.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/common/footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/layout/classicLayout.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:add value=&quot;/tutorial/layout/vboxLayout.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tiles:putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This tile uses another tile, </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>menuSrc.jsp</span></span><span
lang=EN-US>. This later takes a list of pages URLs, and shows links pointing to
a tile writing source of an URL. You will learn later how to write needed tiles.
For now, copy them (</span><span class=code><span lang=EN-US style='font-size:
10.0pt'>viewSrc.jsp; viewSrcBody.jsp, menuViewSrc.jsp</span></span><span
lang=EN-US>) from the original </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>/tutorial/common</span></span><span lang=EN-US>
directory to your </span><span class=code><span lang=EN-US style='font-size:
10.0pt'>/tutorial/common/.</span></span></p>

<h3><a name="_Toc513222173"><span lang=EN-US>5.3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Set up web page</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You can now use your new menu. </span></p>

<p class=MsoNormal><span lang=EN-US>Edit the </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>/tutorial/portalPage.jsp</span></span><span
lang=EN-US> , and specify the path to your new menu :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/tutorial/layout/classicLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;title&quot;  value=&quot;My First Portal Page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;footer&quot; value=&quot;/tutorial/common/footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;menu&quot;   <b>value=&quot;/tutorial/common/menu.jsp&quot;</b>
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;body&quot;   value=&quot;/tutorial/portal/portalBody.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Check result by pointing your browser to
the page.</span></p>

<p class=MsoNormal><span lang=EN-US>You have certainly notice that the vertical
boxes example require a lot of small tiles whose only purpose is to declare
parameters used by other tiles. In the next chapter, we will see how to remove
such tiles, replacing them by definitions declared in a central file. </span></p>

<h1><a name="_Toc521292381"></a><a name="_Toc513222174"><span lang=EN-US>6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Definitions</span></span></a></h1>

<p class=MsoNormal><span lang=EN-US> <i>Note 1 : In previous Components
versions, Definitions was called Instances.</i></span></p>

<p class=MsoNormal><i><span lang=EN-US>Note 2 : It is now possible to define a
Definition into a jsp page (not yet described in tutorial. See
/test/testDefinition.jsp for an example).</span></i></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>A <i>tile definition</i> is a <i>tile</i>
associated with parameters, and identified by a <i>definition name</i>. </span></p>

<p class=MsoNormal><span lang=EN-US>Definitions allow  :</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span lang=EN-US>Screen definitions</span></li>
 <li class=MsoNormal><span lang=EN-US>Centralize declaration of page
     description</span></li>
 <li class=MsoNormal><span lang=EN-US>Avoid repetitive declaration of nearly
     the same pages (by using definitions inheritance)</span></li>
 <li class=MsoNormal><span lang=EN-US>Avoid creation of intermediate components
     used to pass parameters</span></li>
 <li class=MsoNormal><span lang=EN-US>Specify the name of a definition as </span><span
     class=code><span lang=EN-US style='font-size:10.0pt'>forward</span></span><span
     lang=EN-US> in the </span><span class=code><span lang=EN-US
     style='font-size:10.0pt'>struts-config</span></span><span lang=EN-US> file</span></li>
 <li class=MsoNormal><span lang=EN-US>Specify the name of a definition as
     component parameters</span></li>
 <li class=MsoNormal><span lang=EN-US>Overload definition attributes</span></li>
 <li class=MsoNormal><span lang=EN-US>Use a different copy of a component,
     depending on the local (i18n)</span></li>
 <li class=MsoNormal><span lang=EN-US>Use a different copy of a component,
     depending on a key like the channel (see multi-channels)</span></li>
</ul>

<p class=MsoNormal><span lang=EN-US>Definitions are declared in a description
file in XML. You can place this file anywhere and call it as you want, but its
preferred place is under </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>WEB-INF/componentDefinitions.xml</span></span><span
lang=EN-US>. There is a DTD for this file, located in </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>lib/components-config.dtd</span></span><span
lang=EN-US>. Actually, parser doesnt use the dtd to validate file.</span></p>

<h2><a name="_Toc521292382"></a><a name="_Toc513222175"><span lang=EN-US>6.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Declare Definitions</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>Create a new file, and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>WEB-INF/componentDefinitions.xml</span></span><span
lang=EN-US> (You can erase any existing file with this name if any).</span></p>

<p class=MsoNormal><span lang=EN-US>Write or copy following line of code :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;!--
html definition Mappings  --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;component-definitions&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Definition description  --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;definition name=&quot;myFirstDefinition&quot; path=&quot;/tutorial/layout/classicLayout.jsp&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;title&quot;  value=&quot;My First Definition Page&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;footer&quot; value=&quot;/tutorial/common/footer.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;menu&quot;   value=&quot;/tutorial/common/menu.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;body&quot;   value=&quot;/tutorial/basic/hello.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/component-definitions&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This declares a definition called </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>myFirstDefinition</span></span><span
lang=EN-US>, using component </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>/layout/classicLayout.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Definition declaration syntax is nearly the
same as including a component with parameters. You must specify a name, and the
path of the component that you defined. After that, you can add all parameters
that you need. Here, we pass all required parameters, but it is possible to
pass only some of them.</span></p>

<h2><a name="_Toc521292383"></a><a name="_Toc513222176"><span lang=EN-US>6.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Use Definitions</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>To use a definition in a web page, you include
it with the </span><span class=code><span lang=EN-US style='font-size:10.0pt'>insert</span></span><span
lang=EN-US> tag. </span></p>

<p class=MsoNormal><span lang=EN-US>You will see later that you can also use
definitions as component parameters or as <i>forward</i> in the </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>struts-config</span></span><span
lang=EN-US> file.</span></p>

<h3><a name="_Toc513222177"><span lang=EN-US>6.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Insert Definition</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Create a new file, and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>definitionPage.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Write following lines :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
definition=&quot;myFirstDefinition&quot; flush=&quot;true&quot; /&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>These lines include specified component
definition. </span></p>

<p class=MsoNormal><span lang=EN-US>Web server look in its definitions list
declaration for requested definition, and then call this definition.</span></p>

<p class=MsoNormal><span lang=EN-US>In order to work, the definitions list must
be initialized. You will learn how in a few moment. </span></p>

<h3><a name="_Toc513222178"><span lang=EN-US>6.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Override Parameters</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You can override any parameters of a
definition. For example, override the title parameter as following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
definition=&quot;myFirstDefinition&quot; flush=&quot;true&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;title&quot; value=&quot;My First Definition With Overloaded
Title&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>In fact, overriding a parameter as the same
syntax as passing parameter. </span></p>

<p class=MsoNormal><span lang=EN-US>Overriding parameter is often used to
specify the body and title used by a new page.</span></p>

<p class=MsoNormal><span lang=EN-US>Overriding parameter can also be done in
the definition description file.</span></p>

<h2><a name="_Toc521292384"></a><a name="_Toc513222179"><span lang=EN-US>6.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Set Web Application Configuration</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>Before using definitions in a page, you
need to load the definitions list in your application. Using a special servlet,
extending the Struts action servlet, can do this.</span></p>

<p class=MsoNormal><span lang=EN-US>Edit the </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>WEB-INF/web.xml</span></span><span
lang=EN-US> file, and add following lines :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;!--
Action Servlet Configuration --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;servlet&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;servlet-name&gt;action&lt;/servlet-name&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;servlet-class&gt;s1.struts.component.ActionComponentServlet&lt;/servlet-class&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-name&gt;definitions-config&lt;/param-name&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-value&gt;/WEB-INF/componentDefinitions.xml&lt;/param-value&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-name&gt;definitions-debug&lt;/param-name&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-value&gt;1&lt;/param-value&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-name&gt;config&lt;/param-name&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-value&gt;/WEB-INF/action.xml&lt;/param-value&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>      &lt;param-name&gt;debug&lt;/param-name&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-value&gt;2&lt;/param-value&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-name&gt;detail&lt;/param-name&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;param-value&gt;2&lt;/param-value&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;load-on-startup&gt;2&lt;/load-on-startup&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/servlet&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>If you already have a servlet called
action, replace it with the one provided.</span></p>

<p class=MsoNormal><span lang=EN-US>These lines declare a servlet called
action, which is a definition of </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>s1.struts.component.ActionComponentServlet</span></span><span
lang=EN-US>. This servlet extends Struts servlet by adding definitions capabilities.
All struts parameters still work. There is  additional optional parameters : </span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span lang=EN-US></span><span class=code><span
     lang=EN-US style='font-size:10.0pt'>definitions-config</span></span><span
     lang=EN-US>, which specifies the name of the definitions file. If not
     specified, /WEB-INF/componentDefinitions.xml file will be used, if
     exist.</span></li>
 <li class=MsoNormal><span lang=EN-US></span><span class=code><span
     lang=EN-US style='font-size:10.0pt'>definitions-debug</span></span><span
     lang=EN-US>, which specifies debug level. 0 (default) means no debug
     information will be output, 1 means debug information.</span></li>
</ul>

<p class=MsoNormal><span lang=EN-US>Now you can try your first definition page
: restart the web server, and point your browser on definitionPage.jsp.</span></p>

<p class=MsoNormal><b><span lang=EN-US>Warning</span></b><span lang=EN-US> : in
the current version (010429), the definition description file is not
automatically reloaded. This mean that you have to restart the server each time
you change the description file. This will change in future versions.</span></p>

<h2><a name="_Toc521292385"></a><a name="_Toc513222180"><span lang=EN-US>6.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Definitions as Component Parameters</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>A definition name can be used as parameter
of a component, as long as this parameter is used to include something.</span></p>

<p class=MsoNormal><span lang=EN-US>As an example, we will rewrite our previous
portal page entirely by using definitions, with some passed as component
parameters.</span></p>

<p class=MsoNormal><span lang=EN-US>We first need to declare the portal
definition, and then describe the menu and the portal body.</span></p>

<h3><a name="_Toc513222181"><span lang=EN-US>6.4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Portal Definition</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Definition declaration is done in the
componentDefinitions.xml file. Declare the portal definition as following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> &lt;!--
Main Layout Definition description  --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;definition name=&quot;mainLayout&quot; path=&quot;/tutorial/layout/classicLayout.jsp&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;title&quot;  value=&quot;World Financial Online&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;footer&quot; value=&quot;/tutorial/common/footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;menu&quot;   value=&quot;menu.main&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;body&quot;   value=&quot;main.portal.body&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You can note that values of menu and body
attributes are not URLs. They are definition names that we now need to define.</span></p>

<h3><a name="_Toc513222182"><span lang=EN-US>6.4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Portal Body Definition</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You can write the portal body definition as
following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  
&lt;!-- Portal Body declaration--&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;definition name=&quot;main.portal.body&quot; path=&quot;/tutorial/layout/columnsLayout.jsp&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;numCols&quot; value=&quot;2&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;putList name=&quot;list0&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/login.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/messages.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/newsFeed.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/advert2.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;putList name=&quot;list1&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/advert3.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/stocks.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/whatsNew.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/personalLinks.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;add value=&quot;/tutorial/portal/search.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

</div>

<p class=MsoNormal><span lang=EN-US> This declares a definition of </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>columnsLayout</span></span><span
lang=EN-US>, with specified parameters. You can see that the syntax is similar
as the declaration in the jsp file.</span></p>

<h3><a name="_Toc513222183"><span lang=EN-US>6.4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Menu Definitions</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You will now rewrite menu as definitions.
Remember : the main menu is made of logo menu, links menu and sources menu.
Links menu uses </span><span class=code><span lang=EN-US style='font-size:10.0pt'>submenu.jsp</span></span><span
lang=EN-US> components, and sources menu uses </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>menuViewSrc.jsp</span></span><span
lang=EN-US> component. </span></p>

<p class=MsoNormal><b><span lang=EN-US>Main Menu</span></b></p>

<p class=MsoNormal><span lang=EN-US>Following is the code of definition :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span><span
lang=FR-BE></span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE>  </span><span
lang=EN-US>&lt;!-- Main menu definition --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;menu.main&quot; path=&quot;/tutorial/layout/vboxLayout.jsp&quot;
&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;componentsList&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;menu.logo&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;menu.links&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;menu.src&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Again, definition declaration is similar to
declaration in the jsp file. But now, you dont need the intermediate component
anymore.</span></p>

<p class=MsoNormal><b><span lang=EN-US>Menu Logo</span></b></p>

<p class=MsoNormal><span lang=EN-US>Following is the code of definition :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span><span
lang=FR-BE></span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE>  </span><span
lang=EN-US>&lt;!-- menu logo definition --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;menu.logo&quot; path=&quot;/tutorial/common/menu/menuLogo.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Here, we include the menuLogo.jsp file.
Note that there are no parameters. </span></p>

<p class=MsoNormal><span lang=EN-US>In fact it is possible to specify directly
the file to use in the menu.main definition.</span></p>

<p class=MsoNormal><span lang=EN-US>Another possibility is to define a
component taking an image URL as parameter, and showing this image. Try to
write it as an example !</span></p>

<p class=MsoNormal><b><span lang=EN-US>Menu Links</span></b></p>

<p class=MsoNormal><span lang=EN-US>Here again, definition code is similar as
component code :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- menu logo definition --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;menu.links&quot; path=&quot;/tutorial/common/submenu.jsp&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;title&quot; value=&quot;Main Menu&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;items&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;Home&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;Basic Page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;First Portal&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;First Definition&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;Overloaded Definition&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;Extended Definition&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;links&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;index.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;basicPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;portalPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;firstDefinition.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;overloadedDefinitionParameters.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;extendedDefinition.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>If you want to add entry, you need to add
entry name, and corresponding URL.</span></p>

<p class=MsoNormal><b><span lang=EN-US>Menu Sources</span></b></p>

<p class=MsoNormal><span lang=EN-US>Following is an abstract of the menu source
definition :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span><span
lang=FR-BE></span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE> 
&lt;!-- Menu sources definition --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;menu.src&quot; path=&quot;/common/menuSrc.jsp&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;list&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;index.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;basicPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;portalPage.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;firstDefinition.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;overloadedDefinitionParameters.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;extendedDefinition.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;/tutorial/WEB-INF/componentDefinitions.xml&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;/tutorial/basic/myLayout.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;/tutorial/layout/classicLayout.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;/tutorial/layout/columnsLayout.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;/tutorial/layout/vboxLayout.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You can add entry by adding its URL.</span></p>

<h3><a name="_Toc513222184"><span lang=EN-US>6.4.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Try Your Definition</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You are now ready to try your definition : </span></p>

<p class=MsoNormal><span lang=EN-US>Write a JSP page including it, restart the
server, and point your browser on the page.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>index.jsp</span></span><span
lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
definition=&quot;mainLayout&quot; flush=&quot;true&quot; /&gt;</span></p>

</div>

<h2><a name="_Toc521292386"></a><a name="_Toc513222185"><span lang=EN-US>6.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Extended Definitions</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>You can do inheritance with definitions.
This means that a definition can extends another definition, inheriting all
attributes defined in the parent. Of course, child can overload any of the
attributes.</span></p>

<p class=MsoNormal><span lang=EN-US>As an example, you will extend the
mainLayout definition, changing the body and the title. As body, you will use
one of the portal components.</span></p>

<p class=MsoNormal><span lang=EN-US>Your definition declaration looks like
following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Extended definition example --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;extended.definition.example&quot; <b>extends=&quot;mainLayout&quot;</b>
&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;title&quot; value=&quot;Extended Definition&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;body&quot;  value=&quot;/tutorial/portal/newsFeed.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You declare a definition, specifying its
name, and the name of  the definition that it extends. For that, you use </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>extends=definitionName</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>To try your extended definition, you need
to create a web page including the definition. Create a new file and save it
under </span><span class=code><span lang=EN-US style='font-size:10.0pt'>extendedDefinition.jsp</span></span><span
lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
definition=&quot;extended.definition.example&quot; flush=&quot;true&quot; /&gt;</span></p>

</div>

<h2><a name="_Toc521292387"></a><a name="_Toc513222186"><span lang=EN-US>6.6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Definitions as Forward</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>Definitions can be used as <i>forward</i>
targets in the </span><span class=code><span lang=EN-US style='font-size:10.0pt'>struts-config.xml</span></span><span
lang=EN-US> file.</span></p>

<p class=MsoNormal><span lang=EN-US>As an example, you will write a page with
two buttons : <i>success</i> and <i>failure</i>. A form, associated to a Struts
action, surrounds these buttons. The Struts action forwards to a logical name, <i>success</i>
or <i>failure</i>.</span></p>

<h3><a name="_Toc513222187"><span lang=EN-US>6.6.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Form page</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You first need to write the form page. In
fact, you will write the body, declare a definition, and write a page including
this definition.</span></p>

<p class=MsoNormal><b><span lang=EN-US>Body</span></b></p>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>forward/forwardBody.jsp</span></span><span
lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;form
action=&quot;forwardExampleAction.do&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>Select
an action :</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;br&gt;&lt;input
type=&quot;submit&quot; name=&quot;success&quot; value=&quot;success&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;br&gt;&lt;input
type=&quot;submit&quot; name=&quot;failure&quot; value=&quot;failure&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/form&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This file contains a form with two buttons.
You can use Struts tag form instead.</span></p>

<p class=MsoNormal><b><span lang=EN-US>Definition</span></b></p>

<p class=MsoNormal><span lang=EN-US>Declare a new definition including this body
:</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Struts forward definition example --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;forward.example.choice.page&quot; extends=&quot;mainLayout&quot;
&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;title&quot; value=&quot;Struts Forward Test&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;body&quot;  value=&quot;/tutorial/forward/forwardBody.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><b><span lang=EN-US>Page</span></b></p>

<p class=MsoNormal><span lang=EN-US>Write a page including this definition.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under
/strutsForward.jsp :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
definition=&quot;forward.example.choice.page&quot; flush=&quot;true&quot; /&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You can try the page, but you still need to
write the Struts action before submitting !</span></p>

<h3><a name="_Toc513222188"><span lang=EN-US>6.6.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Struts Action</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Struts action is a java class. Following is
an abstract of the code of this class :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>public
class ForwardExampleAction extends Action {</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
public ActionForward perform(</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 ActionMapping
mapping,</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 ActionForm
form,</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 HttpServletRequest
request,</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 HttpServletResponse
response)</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>        throws
IOException, ServletException</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    {</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
String success = request.getParameter( &quot;success&quot; );</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
if( success != null )</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
return (mapping.findForward(&quot;success&quot;));</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
return (mapping.findForward(&quot;failure&quot;));</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    }</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> }</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You can find complete code in
documentation. For now, you have nothing particular to do, because compile
class is included in </span><span class=code><span lang=EN-US style='font-size:
10.0pt'>components.jar</span></span><span lang=EN-US>.</span></p>

<h3><a name="_Toc513222189"><span lang=EN-US>6.6.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Struts Configuration File</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You need to setup the Struts configuration
file, in order to register the new action.</span></p>

<p class=MsoNormal><span lang=EN-US>Add something like following in the </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>action.xml</span></span><span
lang=EN-US> or </span><span class=code><span lang=EN-US style='font-size:10.0pt'>struts-config.xml</span></span><span
lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Global Forward Declarations --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;forward   name=&quot;failure&quot; <b>path=&quot;forward.example.failure.page&quot;</b>/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- struts forward example --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;action     path=&quot;/forwardExampleAction&quot;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>      
actionClass=&quot;s1.struts.example.tutorial.ForwardExampleAction&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;forward name=&quot;success&quot; <b>path=&quot;forward.example.success.page&quot;</b>/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/action&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>If you use the </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>struts-config.xml</span></span><span
lang=EN-US> file, you need to put the global forward between </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>&lt;global-forwards&gt;</span></span><span
lang=EN-US> and </span><span class=code><span lang=EN-US style='font-size:10.0pt'>&lt;/global-forwards&gt;.</span></span></p>

<p class=MsoNormal><span lang=EN-US>You can note that the forwards paths
specified definitions, rather than URLs.</span></p>

<p class=MsoNormal><span lang=EN-US>Now you need to declare these two
definitions.</span></p>

<h3><a name="_Toc513222190"><span lang=EN-US>6.6.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Definition Declarations</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Declare the <i>success</i> and <i>failure</i>
definitions : </span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Struts forward definition example --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;forward.example.success.page&quot; extends=&quot;mainLayout&quot;
&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;title&quot; value=&quot;Struts Forward to 'success'&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;body&quot;  value=&quot;/tutorial/forward/successBody.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Struts forward definition example --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;forward.example.failure.page&quot; extends=&quot;mainLayout&quot;
&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;title&quot; value=&quot;Struts Forward to 'failure'&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;body&quot;  value=&quot;/tutorial/forward/failureBody.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Write the corresponding bodies. </span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/forward/successBody.jsp</span></span><span
lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
Struts forward to success.</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> &lt;br&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/forward/forwardBody.jsp&quot; flush=&quot;true&quot; /&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/forward/failureBody.jsp</span></span><span
lang=EN-US> :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
Struts forward to 'failure'.</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> &lt;br&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
page=&quot;/forward/forwardBody.jsp&quot; flush=&quot;true&quot; /&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US> Note that you dont need to write pages
including the <i>success</i> or <i>failure</i> definitions. Inclusion is done
directly by the value returned by Struts action.</span></p>

<h3><a name="_Toc513222191"><span lang=EN-US>6.6.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Try Your Page</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You can now try the new page. Restart the
web server to reload definitions.</span></p>

<p class=MsoNormal><span lang=EN-US>Point your browser on </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/strutsForward.jsp</span></span><span
lang=EN-US>, and click on one button.</span></p>

<h1><a name="_Toc521292388"></a><a name="_Toc513222192"><span lang=EN-US>7<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Write More Complex Components</span></span></a></h1>

<p class=MsoNormal><span lang=EN-US>Its now time to write more complex
components. You have already used such components : classicLayout, submenu,
viewSrc, </span></p>

<p class=MsoNormal><span lang=EN-US>Such components are intelligent components
containing some logic. You can put logic inside a component, as long as it is
UI logic. You must avoid some business logic inside a component. </span></p>

<h2><a name="_Toc521292389"></a><a name="_Toc513222193"><span lang=EN-US>7.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Submenu Component</span></span></a></h2>

<p class=MsoBodyText><span lang=EN-US>Covered topics : dynamic component,
passing list as parameters, using list in components, using conditional tags.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Submenu takes as parameters : a list of
items, a list of links corresponding to items, a title and value of selected
item. It shows the title, followed by items. When you click on an item, you
follow corresponding link. If selected value correspond to one item, this item
is disable (no link).</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>common/submenu.jsp</span></span><span
lang=EN-US>.</span></p>

<h3><a name="_Toc513222194"><span lang=EN-US>7.1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Iterate on List</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>First, you will show the list of items.
Create a table with two rows. In the first row, write the title parameter.
Around the second row, place iterate tags, and write the iteration value in
the row. </span></p>

<p class=MsoNormal><span lang=EN-US>Code is as following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts.tld&quot; prefix=&quot;struts&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts-logic.tld&quot; prefix=&quot;logic&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts-bean.tld&quot; prefix=&quot;bean&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE>&lt;%@
page import=&quot;java.util.Iterator&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%--
Push component attributes in page context --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:importAttribute
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;table&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr
bgcolor=&quot;blue&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td width=&quot;120&quot; valign=&quot;top&quot; colspan=&quot;2&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;bean:write name=&quot;title&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%--
Prepare the links list to be iterated --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;bean:define
id=&quot;links&quot; name=&quot;links&quot; type=&quot;java.util.List&quot;
scope=&quot;page&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%
Iterator i = links.iterator(); %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%--
iterate on items list --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;logic:iterate
id=&quot;item&quot; name=&quot;items&quot; type=&quot;String&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td width=&quot;10&quot; valign=&quot;top&quot; &gt;&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td valign=&quot;top&quot;  &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;font size=&quot;-1&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;a
href=&quot;&lt;%=request.getContextPath()%&gt;/&lt;%=i.next()%&gt;&quot;&gt;&lt;%=item%&gt;&lt;/a&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/logic:iterate&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/table&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You start by importing components
attributes (items, links, title, selected) to the page context. This allows you
to use such attributes.</span></p>

<p class=MsoNormal><span lang=EN-US>Then, you show the title, and you iterate
on each items. As you can iterate only on one list with the iteration tag, you need
to iterate yourself on second list. It is why you declare an Iterator i.</span></p>

<h3><a name="_Toc513222195"><span lang=EN-US>7.1.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Conditional code</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>One specification is to disable link on
selected item.</span></p>

<p class=MsoNormal><span lang=EN-US>You need to check if an item is equal to
selected value, and write appropriate value.</span></p>

<p class=MsoNormal><span lang=EN-US>Your code become :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%--
iterate on items list --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;logic:iterate
id=&quot;item&quot; name=&quot;items&quot; type=&quot;String&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td width=&quot;10&quot; valign=&quot;top&quot; &gt;&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td valign=&quot;top&quot;  &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;%-- check if selected --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>        &lt;logic:notEqual
name=&quot;selected&quot; value=&quot;&lt;%=item%&gt;&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;font size=&quot;-1&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;a
href=&quot;&lt;%=request.getContextPath()%&gt;/&lt;%=i.next()%&gt;&quot;&gt;&lt;%=item%&gt;&lt;/a&gt;&lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;/logic:notEqual&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>        &lt;logic:equal
name=&quot;selected&quot; value=&quot;&lt;%=item%&gt;&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;font size=&quot;-1&quot;
color=&quot;fuchsia&quot;&gt;&lt;%=item%&gt;&lt;/font&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>      
&lt;/logic:equal&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/logic:iterate&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc513222196"><span lang=EN-US>7.1.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Check Parameters Presence</span></span></a><span
lang=EN-US> </span></h3>

<p class=MsoNormal><span lang=EN-US>The specification says that title and
selected are optional. So, you need to check their presence. For that, you use
Struts tags present and notPresent.</span></p>

<p class=MsoNormal><span lang=EN-US>Check for title presence, and show it only
if present.</span></p>

<p class=MsoNormal><span lang=EN-US>Check for selected presence, and declare a
dummy selected variable if not.</span></p>

<p class=MsoNormal><span lang=EN-US>Your code must be changed to :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;table&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;logic:present
name=&quot;title&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tr
bgcolor=&quot;blue&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;td width=&quot;120&quot; valign=&quot;top&quot; colspan=&quot;2&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;bean:write name=&quot;title&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/logic:present&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;logic:notPresent
name=&quot;selected&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span><span
lang=FR-BE>&lt;% pageContext.setAttribute( &quot;selected&quot;, &quot;&quot;
); %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/logic:notPresent&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc521292390"></a><a name="_Toc513222197"><span lang=EN-US>7.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>View Sources Component</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>[to do 001115]</span></p>

<p class=MsoNormal><span lang=EN-US>You can check code in  
/common/menuViewSrc.jsp. Nearly the same as submenu.</span></p>

<h2><a name="_Toc521292391"></a><a name="_Toc513222198"><span lang=EN-US>7.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Body Including Twice the Same Component</span></span></a></h2>

<p class=MsoBodyText><span lang=EN-US>Covered topics : use of sub-component in
a component.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>In this chapter you will learn how to write
components that can be reused more than one time in a page. As example, we
develop an address component, included two times in an invoice. </span></p>

<p class=MsoNormal><span lang=EN-US>Problems come when you have input fields in
the <i>address</i> component : how to have two different names while using one
component description ? As a solution, you will provide names prefixed with a
components name. This later is passed as a parameter of the component.</span></p>

<p class=MsoNormal><span lang=EN-US>Second difficulty is how to retrieve data
to be shown in the <i>address</i> component ? Here, you will pass a Java object
of class Address, and deal with it in the <i>address</i> component.</span></p>

<p class=MsoNormal><span lang=EN-US>All Java classes are already written and
compiled for you. You can check sources from the Component Library
distribution, under directory </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>src/s1/example/invoice</span></span><span lang=EN-US>.</span></p>

<h3><a name="_Toc513222199"><span lang=EN-US>7.3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Address Component</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>invoice/editAddress.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>In this file, create a table with two
columns : one containing fields names, one containing html input fields. Use
Struts tags text for the input fields.</span></p>

<p class=MsoNormal><span lang=EN-US>Following is the code for this component :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot;    prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/extensions.tld&quot;    prefix=&quot;ext&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts.tld&quot; prefix=&quot;struts&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts-bean.tld&quot; prefix=&quot;bean&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%--
Edit an Address object</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
@param address An address object to edit.</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
@param compName UI Component name. Use as prefix for html fields and
sub-components</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>--%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%--
Retrieve parameters from component context, and declare them as page variable
--%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:useAttribute
id=&quot;addr&quot; name=&quot;address&quot; scope=&quot;page&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:useAttribute
id=&quot;prefix&quot; name=&quot;compName&quot;
classname=&quot;String&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%--
Add a separator tothe component name, in order to have html fields prefix name
: 'compName.'--%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%
prefix = prefix + &quot;.&quot;; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;table
border=&quot;0&quot; width=&quot;100%&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot; width=&quot;30%&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
Street</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;%-- Declare an html input field.                                                                             --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;%-- We use a tag that extends Struts 'text' tag. This extension add          --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;%-- attribute 'prefix', allowing to give a prefix to the normal name         --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;ext:text name=&quot;addr&quot; prefix=&quot;&lt;%=prefix%&gt;&quot;
property=&quot;street1&quot; size=&quot;50&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
Street (con't)</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;ext:text prefix=&quot;&lt;%=prefix%&gt;&quot; name=&quot;addr&quot;
property=&quot;street2&quot; size=&quot;50&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
City</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;ext:text prefix=&quot;&lt;%=prefix%&gt;&quot; name=&quot;addr&quot;
property=&quot;city&quot; size=&quot;50&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
Country</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;ext:text prefix=&quot;&lt;%=prefix%&gt;&quot; name=&quot;addr&quot;
property=&quot;country&quot; size=&quot;50&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
Zip code</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;ext:text prefix=&quot;&lt;%=prefix%&gt;&quot; name=&quot;addr&quot;
property=&quot;zipCode&quot; size=&quot;50&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/table&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>In this code, Struts struts:text tags are
replaced by ext:text tags. This new tag is an extension of struts one,
allowing addition of a prefix to the html input name. This tag will be
integrated to Struts one when the Component Library will be.</span></p>

<p class=MsoNormal><span lang=EN-US>Prefix is computed at the beginning of the
component, just after parameters retrieval.</span></p>

<p class=MsoNormal><span lang=EN-US>Name of generated html input tag will be
compName.fieldname. This will allows to retrieve value in the controller.</span></p>

<h3><a name="_Toc513222200"><span lang=EN-US>7.3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Invoice Component</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>invoice/editInvoice.jsp</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>This invoice contains two times the address
component, and two html input fields :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE>&lt;%@
page language=&quot;java&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot;    prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts.tld&quot; prefix=&quot;struts&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/struts-bean.tld&quot; prefix=&quot;bean&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;struts:errors/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;struts:form
action=&quot;editInvoice.do&quot; name=&quot;invoiceForm&quot; </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>            
type=&quot;s1.struts.example.invoice.InvoiceForm&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;bean:define
id=&quot;invoiceForm&quot; name=&quot;invoiceForm&quot;
type=&quot;s1.struts.example.invoice.InvoiceForm&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;h1&gt;Edit
Customer Informations&lt;/h1&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                          
</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;table
border=&quot;0&quot; width=&quot;100%&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot; width=&quot;30%&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
First Name</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;struts:text property=&quot;firstname&quot; size=&quot;50&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
Last Name</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;struts:text property=&quot;lastname&quot; size=&quot;50&quot;/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
Shipping Address</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&amp;nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    &lt;td
align=&quot;center&quot; colspan=&quot;2&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;%-- Include an &quot;address editor&quot; component.                   --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;%-- Pass the component name and component value as parameter --%&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;tiles:insert page=&quot;/invoice/editAddress.jsp&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;tiles:put name=&quot;compName&quot; value=&quot;shippingAddress&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
&lt;tiles:put name=&quot;address&quot; value=&quot;&lt;%=invoiceForm.getShippingAddress()%&gt;&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;/tiles:insert&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;th align=&quot;right&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
Billing Address</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/th&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&amp;nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;center&quot; colspan=&quot;2&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:insert
page=&quot;/invoice/editAddress.jsp&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:put name=&quot;compName&quot; value=&quot;billAddress&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;tiles:put name=&quot;address&quot; value=&quot;&lt;%=invoiceForm.getBillAddress()%&gt;&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tiles:insert&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    &lt;td
align=&quot;right&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;struts:submit&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
save</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;/struts:submit&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;struts:submit&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
confirm</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;/struts:submit&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;td align=&quot;left&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;struts:reset&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
reset</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
&lt;/struts:reset&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&amp;nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;struts:cancel&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
cancel</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
&lt;/struts:cancel&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;/td&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/tr&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/table&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                          
</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/struts:form&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You include an address component where you
want it to reside. You pass it its name, and the Java object containing values.
This object comes from invoiceForm object, and is retrieved using getter
method. Dont forget to provide two different name for each component included
!</span></p>

<h3><a name="_Toc513222201"><span lang=EN-US>7.3.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Try Your Page</span></span></a></h3>

<p class=MsoNormal><span lang=EN-US>You can use your edit invoice form in a
page using main layout.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>invoice/index.jsp</span></span><span
lang=EN-US>. </span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;%@
taglib uri=&quot;/WEB-INF/tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;tiles:insert
definition=&quot;mainLayout&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  &lt;tiles:put
name=&quot;body&quot; value=&quot;/tutorial/invoice/editInvoice.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/tiles:insert&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc521292392"></a><a name="_Toc513222202"><span lang=EN-US>8<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Internationalization (i18n)</span></span></a></h1>

<p class=MsoBodyText><span lang=EN-US>Covered topics : use of i18n description
files.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Components Library allows having different
copies of a component, each one suited for a language or locale. When the
component is included, the appropriate copy is chosen.</span></p>

<p class=MsoNormal><span lang=EN-US>Now come the problems : where to put copies
? There are two main approaches :</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span lang=EN-US>Put them in the same directory that the
     component, and add language code as suffix (_fr, _en, ).</span></li>
 <li class=MsoNormal><span lang=EN-US>Put them in a separate directory, named
     with the language code (/fr/., /en/., ).</span></li>
</ul>

<p class=MsoNormal><span lang=EN-US>Each approach has advantage and drawbacks,
depending of your application. So we have chosen to let yourself determine
where to place copies.</span></p>

<p class=MsoNormal><span lang=EN-US>The Component i18n mechanism let you write
different <i>definitions</i> file, one for each language. Choice of the
appropriate <i>definition</i> file is done following the same rules as the Java
properties bundle, adding language suffix to file name. You must write a
default <i>definition</i> file, and you can write copies of this file, each
copy name suffixed by the language code.</span></p>

<p class=MsoNormal><span lang=EN-US>In a copy, you dont need to rewrite all
definition descriptions : you just rewrite definitions that differ. All copies
automatically inherit from the default definition file.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>This i18n mechanism is intended to be a
complement of the key-properties bundle provided by Struts. You should use it
when you have big components to internationalize. If you have only small
sentences or words, use the key mechanism. Both mechanisms can be used in one
site.</span></p>

<p class=MsoNormal><span lang=EN-US>Let see how all this work on an example :
you will add a new menu giving choice between several languages. When you
change language, the menu change, displaying only the other possible languages.
Titles of some pages also change. This is not a real i18n example : it just
illustrates how we can do. </span></p>

<p class=MsoNormal><span lang=EN-US>You will start by writing the new menu, and
add it to the main menu. This menu is linked to a Struts action switching the
user Locale object. Then, you will write copies of the definitions file.</span></p>

<h2><a name="_Toc521292393"></a><a name="_Toc513222203"><span lang=EN-US>8.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Select Language Menu</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>This menu shows different available
languages. You will write it has a definition using a submenu component :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;menu.lang&quot; path=&quot;/common/submenu.jsp&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;title&quot; value=&quot;Langue&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;items&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;Francais&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;English&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;Deutch&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;links&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;lang.do?language=FR&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;lang.do?language=</span><span lang=EN-US>UK</span><span
lang=EN-US>&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;lang.do?language=DE&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>You specify the item names, and the
corresponding URLs. Here, items are linked to a Struts action switching the
current language.</span></p>

<p class=MsoNormal><span lang=EN-US>Dont forget to add the new sub-menu to the
main menu definition :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Main menu definition --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;menu.main&quot; path=&quot;/layout/vboxLayout.jsp&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;componentsList&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;menu.logo&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;menu.links&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;menu.src&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    <b>&lt;add
value=&quot;menu.lang&quot; /&gt;</b></span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

</div>

<h2><a name="_Toc521292394"></a><a name="_Toc513222204"><span lang=EN-US>8.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Select Language Action</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>The action Java code is as follow :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>public
final class SelectLocaleAction extends Action {</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
public ActionForward perform(</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 ActionMapping
mapping,</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 ActionForm
form,</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 HttpServletRequest
request,</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>                                 HttpServletResponse
response)</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>        throws
IOException, ServletException {</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>        //
Extract parameters we will need</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
String requested = (String)request.getParameter( &quot;language&quot; );</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
if( requested == null )</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>           
return (mapping.findForward(&quot;failed&quot;));</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
if( requested.equalsIgnoreCase( &quot;FR&quot; ) )</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
setLocale( request, Locale.FRANCE );</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
if( requested.equalsIgnoreCase( &quot;UK&quot; ) )</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
setLocale( request, Locale.UK );</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
if( requested.equalsIgnoreCase( &quot;DE&quot; ) )</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
setLocale( request, Locale.GERMAN );</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
return (mapping.findForward(&quot;success&quot;));</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>    }</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
protected void setLocale( HttpServletRequest request, Locale locale )</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
{</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
HttpSession session = request.getSession(false);</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
if (session != null)</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>       
session.setAttribute(Action.LOCALE_KEY, locale);</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>     
}</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>}</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>It could certainly be improved, but it is
not the purpose of this tutorial. It simply checks requested language, and set
the user locale attribute appropriately (under the name defined by </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>Action.LOCALE_KEY</span></span><span
lang=EN-US>).</span></p>

<p class=MsoNormal><span lang=EN-US>You can now try your pages, but nothing new
happens because you need to define localized copies of definitions description
file.</span></p>

<h2><a name="_Toc521292395"></a><a name="_Toc513222205"><span lang=EN-US>8.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Localized Definition Descriptions Files</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>You can write a <i>definitions</i> file for
each of your languages. Remember that you must have a default file (with no
language code suffix).</span></p>

<p class=MsoNormal><span lang=EN-US>It is better to start from a new empty
file, as you dont need to rewrite all definitions.</span></p>

<p class=MsoNormal><span lang=EN-US>Create a new file and save it under </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>WEB-INF/componentDefinitions_fr.xml</span></span><span
lang=EN-US>. </span></p>

<p class=MsoNormal><span lang=EN-US>Copy the </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>menu.lang</span></span><span lang=EN-US>
definition from the default file. Translate title value and erase the French
items and its link.</span></p>

<p class=MsoNormal><span lang=EN-US>Also copy the </span><span class=code><span
lang=EN-US style='font-size:10.0pt'>mainLayout</span></span><span lang=EN-US>
definition from the default file. Translate title, and change footer value to </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>/fr/common/footer.jsp</span></span><span
lang=EN-US>. Also write such file. </span></p>

<p class=MsoNormal><span lang=EN-US>Your definition description file should
looks like :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;!--
html definition Mappings  --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;component-definitions&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- Main Layout Definition description  --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;definition name=&quot;mainLayout&quot;
path=&quot;/layout/classicLayout.jsp&quot;&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>        </span> 
<span lang=FR-BE>&lt;put <b>name=&quot;title&quot;  value=&quot;Le Monde
Financier En Ligne&quot;</b> /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=FR-BE>        </span> 
<span lang=EN-US>&lt;put name=&quot;header&quot; value=&quot;/tutorial/common/header.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put <b>name=&quot;footer&quot; value=&quot;/tutorial/fr/common/footer.jsp&quot;</b>
/&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;menu&quot;   value=&quot;menu.main&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>         
&lt;put name=&quot;body&quot;   value=&quot;main.portal.body&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>  </span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;!-- select language menu --&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;definition
name=&quot;menu.lang&quot; path=&quot;/common/submenu.jsp&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;put name=&quot;title&quot; value=&quot;Langue&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;items&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;English&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;Deutch&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;putList name=&quot;links&quot; &gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;lang.do?language=</span><span lang=EN-US>UK</span><span
lang=EN-US>&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>   
&lt;add value=&quot;lang.do?language=DE&quot; /&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US> 
&lt;/putList&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/definition&gt;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder style='border:none;padding:0cm'><span lang=EN-US>&lt;/component-definitions&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Do the same for others language.</span></p>

<h2><a name="_Toc521292396"></a><a name="_Toc513222206"><span lang=EN-US>8.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
dir=LTR><span lang=EN-US>Try Your Pages</span></span></a></h2>

<p class=MsoNormal><span lang=EN-US>You can now try your i18n pages. Point your
browser on the </span><span class=code><span lang=EN-US style='font-size:10.0pt'>index.jsp</span></span><span
lang=EN-US> page, and select another language. Watch the window title, and the
footer. </span></p>

<p class=MsoNormal><span lang=EN-US>In the menu, select a page extending the </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>mainLayout</span></span><span
lang=EN-US> definition, like <i>Extended Definition</i>. Check the footer :
it is the one defined by </span><span class=code><span lang=EN-US
style='font-size:10.0pt'>mainLayout</span></span><span lang=EN-US> definition
in the localized description file because shown definition extends </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>mainLayout</span></span><span
lang=EN-US>. </span></p>

<h1><a name="_Toc521292397"></a><a name="_Toc513222207"><span lang=EN-US>9<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span dir=LTR><span lang=EN-US>Multi-Channels</span></span></a></h1>

<p class=MsoNormal><span lang=EN-US>The same mechanism than i18n can be used
for channels (wml, different browser support, ). Each channel components are
written under a different directory.</span></p>

<p class=MsoNormal><span lang=EN-US>Work in progress. Example available in </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>comps-channel.war</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>The idea for channel system is to write
another <i>definition factory</i> that will choose the component to insert
according to the provided <i>definition name</i>, and a channel key extracted
from wherever you want (value from session, , ). Actually, factory
implementation is clearly separated from the rest. If you are interested, you
can write your own factory. It needs to implement
ComponentDefinitionsFactory.java (1 method). You can let ComponentActionServlet
create your factory by setting the servlet init parameter </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>definitions-factory-class</span></span><span
lang=EN-US> to the name of your factory. You can also define init parameters
for your factory. They will be passed in a Map. Again, check example in </span><span
class=code><span lang=EN-US style='font-size:10.0pt'>comps-channel.war.</span></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

</div>

</body>

</html>
