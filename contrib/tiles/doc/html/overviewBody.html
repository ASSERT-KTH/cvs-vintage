<html>

<head>
<meta name=Generator content="Microsoft Office HTML Filter 2.0">
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Originator content="Microsoft Word 9">
<title>JSP Framework</title>
<style>
<!--
 
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
h1
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:21.6pt;
	text-align:justify;
	text-indent:-21.6pt;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:Arial;}
h2
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-indent:-28.8pt;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
h3
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-indent:-36.0pt;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:Arial;}
h4
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:43.2pt;
	text-align:justify;
	text-indent:-43.2pt;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman";}
h5
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:50.4pt;
	text-align:justify;
	text-indent:-50.4pt;
	font-size:13.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
h6
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:57.6pt;
	text-align:justify;
	text-indent:-57.6pt;
	font-size:11.0pt;
	font-family:"Times New Roman";}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:64.8pt;
	text-align:justify;
	text-indent:-64.8pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:72.0pt;
	text-align:justify;
	text-indent:-72.0pt;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:79.2pt;
	text-align:justify;
	text-indent:-79.2pt;
	font-size:11.0pt;
	font-family:Arial;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:16.0pt;
	font-family:Arial;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	background:navy;
	font-size:12.0pt;
	font-family:Tahoma;}
p.CodewithBorder, li.CodewithBorder, div.CodewithBorder
	{
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	border:none;
	padding:0cm;
	font-size:8.0pt;
	font-family:Courier;}
p.picture10, li.picture10, div.picture10
	{
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Times New Roman";}
p.Createdby, li.Createdby, div.Createdby
	{
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.Filenameandpath, li.Filenameandpath, div.Filenameandpath
	{
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
</head>

<body lang=EN-GB link=blue vlink=purple>

<div class=Section1>

<p class=MsoTitle><span lang=EN-US>Components</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US>Author
: <a href="mailto:cedric.dumoulin@lifl.fr">Cedric Dumoulin</a></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US>Date
: </span><span
lang=EN-US>22 Sep. 2000</span></p>

<p class=MsoFooter align=center style='text-align:center'><span lang=EN-US>Rev
: </span><span
lang=EN-US>16 Nov. 2000</span></p>

<p class=MsoFooter align=center style='text-align:center'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoFooter><span lang=EN-US>Warning : This document is not “up to date”.
Start with the tutorial instead.</span></p>

<p class=MsoFooter><span lang=EN-US>Latest version (Web site) : <a
href="http://www.lifl.fr/~dumoulin/components">http://www.lifl.fr/~dumoulin/components</a></span></p>

<p class=MsoFooter><span lang=EN-US>&nbsp;</span></p>

<h1><span lang=EN-US>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Goals</span></h1>

<p class=MsoNormal><span lang=EN-US>We want to be able to build web pages by
assembling components. There are two kinds of components : coarse grain
components and fine grain components. Coarse grain components are components
made of several html instructions. For example, a component rendering an
address or a header is a coarse grain component. Examples of fine grain
components are an input/output field performing I18n formatting, a popup menu,
... For now, we only focus on coarse grain components. </span></p>

<p class=MsoNormal><span lang=EN-US>Following are the main goals that we want
to reach :</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span
     lang=EN-US>Reusable : it must be possible to write component that are
     reused in different pages</span></li>
 <li class=MsoNormal><span
     lang=EN-US>Independent : A component must be, as much as possible,
     independent from its “parent” (the entity that use the component). </span></li>
 <li class=MsoNormal><span
     lang=EN-US>Build complex pages (like portal) by assembling
     components.  </span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span
      lang=EN-US>Divide the complexity of the page in smaller components</span></li>
  <li class=MsoNormal><span
      lang=EN-US>Focus on each component independently, without care on other
      components.</span></li>
  <li class=MsoNormal><span
      lang=EN-US>Focus on assembling, or layout, components without care on
      component content.</span></li>
 </ul>
 <li class=MsoNormal><span
     lang=EN-US>Have consistent web site “look and feel” by providing some
     common “layout components”, and assembling common components like header,
     menu, footer, …</span></li>
 <li class=MsoNormal><span
     lang=EN-US>Perform changes on all pages by only changing concerned
     component.</span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span
      lang=EN-US>For example, change all menus or headers by only changing the
      concerned component. No need changes in each page.</span></li>
 </ul>
 <li class=MsoNormal><span
     lang=EN-US>Be able to modify pages composition, or components content from
     a central point, like a description file.</span></li>
 <li class=MsoNormal><span
     lang=EN-US>Have a library of common components. Don’t rewrite them (or
     copy/paste) each time.</span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span
      lang=EN-US>Improvement in one component will be propagated to all pages
      using this component (not so easy with copy/paste).</span></li>
 </ul>
 <li class=MsoNormal><span
     lang=EN-US>A component can be made by assembling other component.</span></li>
 <li class=MsoNormal><span
     lang=EN-US>Simple to understand and use</span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span
      lang=EN-US>Preferably, component is describe in a JSP file.</span></li>
 </ul>
 <li class=MsoNormal><span
     lang=EN-US>Fit in JSP and Struts philosophy.</span></li>
</ul>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US>&nbsp;</span></p>

<h1><span lang=EN-US>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Proposed Architecture</span></h1>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Following illustrate how we want to build a
page by assembling components :</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>The page is made of a <i>header</i>, a <i>menu</i>
and a <i>body</i>. <i>Body</i> itself is made of two others components. This is
a simple example, and we want to be able to build more complex pages.</span></p>

<p class=MsoNormal><img width=555 height=175
 src="./overviewBody_files/image001.gif"><br clear=ALL>
<span lang=EN-US>The servlet “include” mechanism already responds to some of
our goals. But, in order to reach them completely, we need some additional
materials. </span></p>

<p class=MsoNormal><span lang=EN-US>Basically, a component is a JSP file that
will be included in another file or component. We associate to component a
“component context”, helping passing parameters. Component contexts, and parameters,
are only visible inside the components. They are not visible by others
sub-components, neither by parents.</span></p>

<p class=MsoNormal><span lang=EN-US>Coarse grain component can be seen like a
java method : you include / call the component, passing it some parameters.
Unlike method, component can’t return something.</span></p>

<p class=MsoNormal><span lang=EN-US>A component can be developed independently
from its caller. You just have to specify which parameters are needed. This
independence allows developing reusable components.</span></p>

<h2><span lang=EN-US>2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Why adding a Context ?</span></h2>

<p class=MsoNormal><span lang=EN-US>Component context contains properties
associated to component, and only accessible by this component. Parent
including a component can set properties.</span></p>

<p class=MsoNormal><span lang=EN-US>Context is needed in order to be able to
have independent component : like this, you don’t have to care if a component
attribute (parameter) has the same name as another JSP attribute.</span></p>

<p class=MsoNormal><span lang=EN-US>One can say that component context is the
same as the jsp “page scope”. This is partially true : jsp “page scope” doesn’t
allows addition of  attributes outside
the page, which forbid passing parameters from parent.</span></p>

<p class=MsoNormal><span lang=EN-US>Furthermore, context will be used for
future features, like associating JavaScript to a component.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><span lang=EN-US>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Usage</span></h1>

<h2><span lang=EN-US>3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Writing a Component</span></h2>

<p class=MsoNormal><span lang=EN-US>As a component is a JSP file, all
facilities provided by JSP can be used to write the component. In addition, the
component can access its parameters, provided by its “parent”.</span></p>

<p class=MsoNormal><span lang=EN-US>Following is an example of component :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib
uri=&quot;/WEB-INF/components.tld&quot; prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;br&gt; This is a component</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;br&gt; It uses properties passed
by its parent</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;br&gt; title =
&lt;comp:getAttribute name=”title” /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;br&gt; This component has index
number &lt;comp:getAttribute name=”index” /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;br&gt; That’s all folks !</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This example is not very useful, it just
illustrate how component work.</span></p>

<p class=MsoNormal><span lang=EN-US>[todo : write a more realistic example]</span></p>

<h2><span lang=EN-US>3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Including a Component</span></h2>

<p class=MsoNormal><span lang=EN-US>A component can be included anywhere in a
page or in another component. You need to use a special include tag, allowing
passing parameters.</span></p>

<p class=MsoNormal><span lang=EN-US>For example, to include previous component,
write something like that :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib
uri=&quot;/WEB-INF/components.tld&quot; prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>  
…</span></p>

<p class=CodewithBorder>&lt;comp:include
page=”comp.jsp”&gt;</p>

<p class=CodewithBorder>  <span lang=EN-US>&lt;comp:putAttribute
name=“title” value=”Welcome”&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=“index” value=”3”&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/comp:include&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>  
…</span></p>

</div>

<p class=MsoHeader><span lang=EN-US>&nbsp;</span></p>

<h2><span lang=EN-US>3.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Assembling Components : Layout
Containers</span></h2>

<p class=MsoNormal><span lang=EN-US>There is nothing special to assemble
components : you do it by including each component where you want it to reside.
</span></p>

<p class=MsoNormal><span lang=EN-US>A component used to layout other components
can be call a “Layout Container”. We will define a set of basic layout
containers, and reuse them whenever needed. </span></p>

<p class=MsoNormal><span lang=EN-US>Examples of layout containers are :</span></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Header-menu-footer-body container</span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Define a classical page</span></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Grid container</span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Layout components in a fixed grid
(table ?).</span></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Box container</span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Components are “stacked” (horizontally
or vertically)</span></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Flow container</span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Components are rendered one after the
other.</span></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Columns container</span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Layout components in columns. You need
to provide lists of components and the number of columns.</span></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-18.0pt;'><span lang=EN-US style='font-family:
"Courier New";'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>…</span></p>

<p class=MsoNormal style='margin-left:3.0pt'><span lang=EN-US>Following is the
code for the <i>header-menu-footer-body</i> container. Note that in this file,
we only focus on the layout of components, not on their contents.</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib
uri=&quot;/WEB-INF/components.tld&quot; prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;%--   parameters : title, header, menu, body, footer </span></p>

<p class=CodewithBorder><span lang=EN-US>--%&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;comp:useAttribute
name=&quot;title&quot; classname=&quot;String&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;HTML&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;HEAD&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;title&lt;comp:include attribute='title'/&gt;&lt;/title&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;/HEAD&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;body&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;table border=&quot;0&quot;
width=&quot;100%&quot; cellspacing=&quot;5&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;tr&gt;&lt;td
colspan=&quot;2&quot;&gt;&lt;comp:include attribute=&quot;header&quot;
/&gt;&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;tr&gt;&lt;td
colspan=&quot;2&quot;&gt;&lt;hr&gt;&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;tr&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;td width=&quot;120&quot; valign=&quot;top&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;comp:include attribute='menu'/&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;td valign=&quot;top&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;comp:include attribute='body' /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;/td&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/tr&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;tr&gt;&lt;td
colspan=&quot;2&quot;&gt;&lt;hr&gt;&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;tr&gt;&lt;td
colspan=&quot;2&quot;&gt;&lt;comp:include attribute=&quot;footer&quot;
/&gt;&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/table&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/body&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/html&gt;</span></p>

</div>

<p class=MsoNormal style='margin-left:3.0pt'><span lang=EN-US>To use this
container/component, include it and pass needed parameters, as in the example :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=FR-BE>&lt;%@
page language=&quot;java&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib
uri=&quot;/WEB-INF/components.tld&quot; prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;comp:include
component=&quot;/layout/classicLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;title&quot;  value=&quot;index.title&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;header&quot;
value=&quot;/common/header.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;menu&quot;   value=&quot;/common/menu.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;footer&quot;
value=&quot;/common/footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;body&quot;   value=&quot;/bodies/index.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/comp:include&gt;  </span></p>

</div>

<p class=MsoNormal style='margin-left:3.0pt'><span lang=EN-US>&nbsp;</span></p>

<h2><span lang=EN-US>3.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Instances</span></h2>

<p class=MsoNormal><span lang=EN-US>Components usually require some arguments
to work properly. We provide a way to associate predefined arguments to a
component. This association is a kind of “instance” of a component. Such
instance is referenced by a name which can be used in include tags or in <i>forward</i>
directives in <i>struts-config.xml</i>. </span></p>

<p class=MsoNormal><span lang=EN-US>It is possible to declare a component
instance, and use the same instance at different place.</span></p>

<h3><span lang=EN-US>3.4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Instances Declarations</span></h3>

<p class=MsoNormal><span lang=EN-US>All component instance declarations are
done in a XML file. Syntax is similar as the one used in include tag. Following
is an example of declaration :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US> 
</span><span lang=FR-BE>&lt;component-instances&gt;
</span></p>

<p class=CodewithBorder><span lang=FR-BE>&nbsp;</span></p>

<p class=CodewithBorder><span lang=FR-BE>  &lt;!— Page instance description  --&gt;</span></p>

<p class=CodewithBorder><span lang=FR-BE>  </span><span lang=EN-US>&lt;instance
name=&quot;portal&quot; path=&quot;classicLayout.jsp&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;title&quot; 
value=&quot;Welcome to our Portal Demo&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;header&quot; value=&quot;header.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;footer&quot; value=&quot;footer.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;menu&quot;  
value=&quot;menu.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;body&quot;  
value=&quot;body.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
</span><span lang=FR-BE>&lt;/instance&gt;</span></p>

<p class=CodewithBorder><span lang=FR-BE>  …</span></p>

<p class=CodewithBorder><span lang=FR-BE>&lt;/component-instances&gt;</span></p>

<p class=CodewithBorder><span lang=FR-BE>&nbsp;</span></p>

</div>

<p class=MsoNormal><span lang=FR-BE> </span><span lang=EN-US>You can see that the
declaration is very similar than including a component. The declared name will
be the instance name, and will allow you to identify the instance.</span></p>

<p class=MsoNormal><span lang=EN-US>One XML file can contains several
declarations. This allows easy modification of your instances.</span></p>

<h3><span lang=EN-US>3.4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Instance Inclusion</span></h3>

<p class=MsoNormal><span lang=EN-US>Using a component instance is similar as
using a component : you specify where you want to include your instance, like
in the following example :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib
uri=&quot;/WEB-INF/components.tld&quot; prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;%-- Example of instance inclusion --%&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;comp:include
instance=&quot;portal&quot; flush=&quot;true&quot;/&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>In the include tag, you specify the name of
the instance you want to include.</span></p>

<h3><span lang=EN-US>3.4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Incomplete Instance </span></h3>

<p class=MsoNormal><span lang=EN-US>In the instance description file, you can
partially instanciate a component, specifying only some of the parameters.
Others parameters must be passed when including component.</span></p>

<p class=MsoNormal><span lang=EN-US>You can also provide parameters in the
description file, and override them while including instance. This gives
default parameters for an instance.</span></p>

<p class=MsoNormal><span lang=EN-US>In the following example, we override the
title parameter :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib
uri=&quot;/WEB-INF/components.tld&quot; prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;%-- Example of component
instanciation, passing directly parameters --%&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;comp:include
instance=&quot;portal&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;title&quot;  value=&quot;Overridden title&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/comp:include&gt;</span></p>

</div>

<h3><span lang=EN-US>3.4.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Instance Name as Parameter</span></h3>

<p class=MsoNormal><span lang=EN-US>It is possible to pass the name of an
instance as another instance parameter. </span></p>

<p class=MsoNormal><span lang=EN-US>In following example, portal’s menu is
itself an instance of menu.jsp.</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder>&lt;component-instances&gt;</p>

<p class=CodewithBorder>   …</p>

<p class=CodewithBorder><span lang=EN-US> 
</span><span lang=FR-BE>&lt;!-- Page
instance description  --&gt;</span></p>

<p class=CodewithBorder><span lang=FR-BE>  </span><span lang=EN-US>&lt;instance
name=&quot;portal&quot; path=&quot;classicLayout.jsp&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;title&quot; 
value=&quot;Welcome to our Portal Demo&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;header&quot; value=&quot;header.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;footer&quot; value=&quot;footer.jsp&quot;
/&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;menu&quot;  
value=&quot;portalMenu&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;body&quot;  
value=&quot;body.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
</span><span lang=FR-BE>&lt;/instance&gt;</span></p>

<p class=CodewithBorder><span lang=FR-BE>   …</span></p>

<p class=CodewithBorder><span lang=FR-BE>  &lt;!-- Component instance description  --&gt;</span></p>

<p class=CodewithBorder>  <span lang=EN-US>&lt;instance
name=&quot;portalMenu&quot; path=&quot;menu.jsp&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;index&quot; value=&quot;2&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;putAttribute name=&quot;title&quot; value=&quot;Portal Menu&quot;
/&gt;</span></p>

<p class=CodewithBorder>  <span lang=FR-BE>&lt;/instance&gt;</span></p>

<p class=CodewithBorder><span lang=FR-BE>&lt;/component-instances&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>With this mechanism, we can have a “more
generic” menu, requiring more parameters (menu title, index), and have specific
instance of this component (portalMenu, userMenu, …).</span></p>

<h3><span lang=EN-US>3.4.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Instances and Struts</span></h3>

<p class=MsoNormal><span lang=EN-US>Struts allows to specify “forward pages” to
be called after a struts action is executed. It could be interesting to be able
to specify also component instances.</span></p>

<p class=MsoNormal><span lang=EN-US>For that, we provide a servlet extending
the original struts servlet, and taking in charge forwarding request to
instances, rather than to page. If no instance is found, servlet behavior is
the same as the struts one.</span></p>

<p class=MsoNormal><span lang=EN-US>To be able to specify instances or pages in
“struts action forward”, simply use the new servlet. In your application <i>web.xml</i>,
change your <i>action</i> servlet declaration with something like following :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US> 
&lt;!-- Action Servlet Configuration --&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;servlet&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;servlet-name&gt;action&lt;/servlet-name&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;servlet-class&gt;ui.jsp.components.ActionInstancesServlet&lt;/servlet-class&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-name&gt;instances&lt;/param-name&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-value&gt;&gt;/WEB-INF/componentInstances.xml
&lt;/param-value&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-name&gt;config&lt;/param-name&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-value&gt;/WEB-INF/action.xml&lt;/param-value&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-name&gt;debug&lt;/param-name&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-value&gt;2&lt;/param-value&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-name&gt;detail&lt;/param-name&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>     
&lt;param-value&gt;2&lt;/param-value&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;/init-param&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>   
&lt;load-on-startup&gt;2&lt;/load-on-startup&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;/servlet&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US> Notes : All struts parameters can still working.</span></p>

<h3><span lang=EN-US>3.4.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Instances as URL target</span></h3>

<p class=MsoNormal><span lang=EN-US>Component Instances can describe a final
web page, containing &lt;body&gt;…&lt;/body&gt; tags. It could be interesting
to associate an instance to an URL, allowing all requests sent to this URL to
be forwarded to the instance. </span></p>

<h4><span lang=EN-US>3.4.6.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>Simple Approach</span></h4>

<p class=MsoNormal><span lang=EN-US>The simplest way to do that is to have a
jsp file corresponding to the URL, and containing an include tag. </span></p>

<p class=MsoNormal><span lang=EN-US>Following is an example including a defined
instance.</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib uri=&quot;/WEB-INF/components.tld&quot;
prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;%-- include a component --%&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;comp:include
instance=&quot;main&quot; flush=&quot;true&quot;/&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>This example work well, but it need to have
the defined instances table initialized (see Include tag syntax).</span></p>

<p class=MsoNormal><span lang=EN-US>Next example do the same thing, but
instance parameters are defined in the include tag.</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;%@ taglib
uri=&quot;/WEB-INF/components.tld&quot; prefix=&quot;comp&quot; %&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;%-- Example of component
instanciation, passing directly parameters --%&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;comp:include
component=&quot;classicLayout.jsp&quot; flush=&quot;true&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;title&quot;  value=&quot;Welcome to our demo&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;header&quot;
value=&quot;header.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;footer&quot;
value=&quot;footer.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;menu&quot;   value=&quot;menu.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;comp:putAttribute name=&quot;body&quot;   value=&quot;body.jsp&quot; /&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/comp:include&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>Comments :</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span
     lang=EN-US>Both approaches do the same thing. One require the declared
     instance table to be initialized.</span></li>
</ul>

<p class=MsoNormal><span lang=EN-US>Advantages :</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span
     lang=EN-US>No need for extra mechanism to perform mapping between URL and
     component instances</span></li>
</ul>

<p class=MsoNormal><span lang=EN-US>Drawbacks :</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span
     lang=EN-US>Need to define one jsp file for each URL.</span></li>
</ul>

<h4><span lang=EN-US>3.4.6.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>Servlet Approach</span></h4>

<p class=MsoNormal><span lang=EN-US>Another approach consists to have a servlet
taking in charge mapping between URLs and Instances. </span></p>

<p class=MsoNormal><span lang=EN-US>This servlet could be initialized with a
description file, describing mappings, like in following example :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;component-instances&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&nbsp;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;!— Url mapping --&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
&lt;mapping url=”index.jsp&quot; instance=&quot;main&quot;&gt;</span></p>

<p class=CodewithBorder><span lang=EN-US>&lt;/component-instances&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>In this approachs, we also need to redirect
concerned URL to the servlet. This is done in the application description file
(web.xml). Care must be taken to redirect only concerned URLs, and not “all”
urls. For example, one can thing to specify “*.jsp” while deploying the
servlet. This is possible, but need some care : if you do so, all URLs ending
in “.jsp” are sent to the servlet, even those that are forwarded inside the
servlet itself ! This could result in an endless recursive call. To avoid this
you need, inside servlet, to forward to the original servlet serving “.jsp”.
This is feasible, but is not guaranteed to be portable across jsp servers.</span></p>

<p class=MsoNormal><span lang=EN-US>Need more investigation to have a better
solution.</span></p>

<h1><span lang=EN-US>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Examples</span></h1>

<h2><span lang=EN-US>4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Portal</span></h2>

<p class=MsoNormal><span lang=EN-US>See example in the <i>portal</i>
application</span></p>

<p class=MsoNormal><span lang=EN-US>[to do : complete this example]</span></p>

<p class=MsoNormal><span lang=EN-US>Following is an example of a Portal  Page made by assembling components.</span></p>

<p class=MsoNormal><img width=710 height=349
 src="./overviewBody_files/image002.gif"><br clear=ALL>
<span lang=EN-US>&nbsp;</span></p>

<br clear=ALL>

<h2><span lang=EN-US>4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Include Twice the Same Component</span></h2>

<p class=MsoNormal><span lang=EN-US>See example in the <i>portal</i>
application</span></p>

<p class=MsoNormal><span lang=EN-US>[to do : complete this example]</span></p>

<p class=MsoNormal><span lang=EN-US>Following schema illustrate how we can
build a component or page by including twice the same component. </span></p>

<p class=MsoNormal><img width=469 height=267
 src="./overviewBody_files/image003.gif"><br clear=ALL>
<span lang=EN-US>&nbsp;</span></p>

<br clear=ALL>

<h2><span lang=EN-US>4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Struts Example Revisited</span></h2>

<p class=MsoNormal><span lang=EN-US>See example in the <i>comp-struts</i> and <i>comp-struts-instance</i>
application</span></p>

<p class=MsoNormal><span lang=EN-US>[to do : complete this example]</span></p>

<h1><span lang=EN-US>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Installation</span></h1>

<p class=MsoNormal><span lang=EN-US>See the <a
href="..\s1\proposals\doc\installation.jsp">installation page</a> for detailed
installation guide.</span></p>

<p class=MsoNormal><span lang=EN-US>Also refer to the Struts framework
installation for more helps.</span></p>

<h2><span lang=EN-US>5.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Requirements</span></h2>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span
     lang=EN-US>Following libraries are required : </span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal><span
      lang=EN-US>jaxp.jar, parser.jar, struts.jar, components.jar</span></li>
 </ul>
 <li class=MsoNormal><span
     lang=EN-US>struts.jar version must be greater than the 0.5 release.
     Distribution includes a compatible release.</span></li>
 <li class=MsoNormal><span
     lang=EN-US>Refer to Struts framework installation for others requirements.</span></li>
</ul>

<h2><span lang=EN-US>5.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Install Examples</span></h2>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><span
     lang=EN-US>Examples come in Web Application Archive (war files). You can
     install these web applications on any servlet container.</span></li>
 <li class=MsoNormal><span
     lang=EN-US>For example, with Tomcat, install war files in the webapps
     directory.</span></li>
 <li class=MsoNormal><span
     lang=EN-US>Start with “<i>comp-struts-portal/index.jsp” </i>page.</span></li>
</ul>

<h2><span lang=EN-US>5.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Component Instances Installation<a
name="_Component_Library"></a></span></h2>

<p class=MsoNormal><span lang=EN-US>All tags using components instances need to
find the instances list. Search for the list is done in following order : page,
request, session, and then application. You must put the instances list in one
of this scope before using such tags. </span></p>

<p class=MsoNormal><span lang=EN-US>Usually, list is placed in the application
scope, at initialization time. </span></p>

<p class=MsoNormal><span lang=EN-US>Typical code look like this :</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US> 
String fileName = &quot;/WEB-INF/instances.xml&quot;;</span></p>

<p class=CodewithBorder><span lang=EN-US> 
try</span></p>

<p class=CodewithBorder><span lang=EN-US>   
{</span></p>

<p class=CodewithBorder><span lang=EN-US>   
InputStream input =
pageContext.getServletContext().getResourceAsStream(fileName);</span></p>

<p class=CodewithBorder><span lang=EN-US>   
if(input == null )</span></p>

<p class=CodewithBorder><span lang=EN-US>     
throw new JspException( &quot;Can't open '&quot;+ fileName +
&quot;'&quot;);             </span></p>

<p class=CodewithBorder><span lang=EN-US>   
instances = new ComponentInstances( input );</span></p>

<p class=CodewithBorder><span lang=EN-US>   
}</span></p>

<p class=CodewithBorder><span lang=EN-US>  
catch( Exception ex )</span></p>

<p class=CodewithBorder><span lang=EN-US>   
{</span></p>

<p class=CodewithBorder><span lang=EN-US>   
ex.printStackTrace();</span></p>

<p class=CodewithBorder><span lang=EN-US>   
throw new JspException( &quot;Error while creating instances. </span><span
lang=FR-BE>See console&quot; );</span></p>

<p class=CodewithBorder><span lang=FR-BE>    }</span></p>

<p class=CodewithBorder align=left style='text-align:left'><span lang=FR-BE> 
pageContext.setAttribute(ComponentConstants.COMPONENT_INSTANCES,
instances                                                           <br>                          
pageContext.APPLICATION_SCOPE );                                                                       </span></p>

</div>

<p class=MsoNormal><span lang=EN-US>One possibility is to have an initialization
servlet doing that. You can use the provided servlet ComponentActionServlet
instead of the Struts original one. See installation page for details.</span></p>

<p class=MsoNormal><span lang=EN-US>Another possibility is to use a
miscellaneous tag, checking and loading requested list if necessary.</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 1.0pt 1.0pt 1.0pt;'>

<p class=CodewithBorder><span lang=EN-US>&lt;comp:initComponentInstances
file=”instances.xml” scope=”application” /&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

</div>

</body>

</html>
