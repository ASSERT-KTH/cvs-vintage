<html><head>
<META HTTP-EQUIV="KEYWORDS" CONTENT="struts validation validator validate java JSP servlet">
<META NAME="DESCRIPTION" CONTENT="Struts Validation Framework">
<title>Struts Validator</title>
<LINK REL="STYLESHEET" TYPE="text/css" HREF="css/main_style.css">
</head>
<body>

  <table border=0 cellspacing=5 cellpadding=6 width="100%">
    <tr>
       <td colspan="2">
       <table border=0 cellpadding=4 cellspacing=0 width=100% bgcolor="0000AA"><tr><td>
          <table border=0 cellpadding=1 cellspacing=0 width=100% bgcolor=FFFFFF><tr width=100%><td>
             &nbsp;<font size=+3>Struts Validator</font>
             <BR>
             &nbsp;<font size=+1>Validation Framework for Struts</font>
          </td></tr></table>
       </td></tr></table>
</td>
    </tr>
    <tr valign="top">
       <td valign="top">
          <!-- Menu -->
          <table cellpadding=0 cellspacing=0 border=0 width="40">
             <tr bgcolor=eeeeee><td>
                <table cellpadding=3 cellspacing=1 border=0>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="index.html">Home</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="installation.html">Installation</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="overview.html">Overview</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="jsptags.html">JSP Tags</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="api">Javadoc</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="todolist.html">To Do List</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="revision.html">Revision Info</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="archive">Downloads</a></b></font></td></tr>
                   <tr><td align="center" bgcolor=#FFFFFF><font size=-1>
	              <b><a href="contact.html">Contact Information</a></b></font></td></tr>
                </table>
             </td></tr>
          </table>
          <!-- / Menu -->
       </td>
       <!-- Body -->
       <td valign="top">
          <H2>Overview</H2>
          <p>The Validation Framework was made to work with 
          <a href="http://jakarta.apache.org/struts">Struts</a>.  It can perform basic 
          validations to check if a field is required, matches a regular expression, 
          email, credit card, and server side type checking and date validation.  Different 
          validation rules can be defined for different locales.  The framework has basic support for 
          user defined constants which can be used in some field attributes.  The validation routines 
          are modifiable in the validation.xml file so custom validation routines can be created and added 
          to the framework.
          </p>

          <H3>Internationalization</H3>
          <p>Validation rules for forms can be grouped under a FormSet in the validation.xml file.  
          The FormSet has language, country, and variant attributes that correspond with the 
          java.util.Locale class.  If they are not used, the FormSet will be set to the default locale.  
          A FormSet can also have constants associated with it.  On the same level as a FormSet there can 
          be a global element which can also have constants and have validator actions that perform 
          validations.
          </p>
          
          <p>The default error message for a pluggable validator can be overriden with the 
          msg element.<BR>
          <BR>
          ex: &lt;field    property="lastName" <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; depends="required,mask"&gt; <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;msg name="mask" key="registrationForm.lastname.maskmsg"/&gt; <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg0 key="registrationForm.lastname.displayname"/&gt; <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-name&gt;mask&lt;/var-name&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-value&gt;^[a-zA-Z]*$&lt;/var-value&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp; &lt;/field&gt;
          </p>

          <p>The arguments for error messages can be set with the arg0-arg3 elements.  
          If the arg0-arg3 elements' name attribute isn't set, it will become the default arg 
          value for the different error messages constructed.  If the name attribute is set, 
          you can specify the argument for a specific pluggable validator and then this will be 
          used for constructing the error message.<BR>
          <BR>
          ex: &lt;field    property="lastName" <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; depends="required,mask"&gt; <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;msg name="mask" key="registrationForm.lastname.maskmsg"/&gt; <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg0 key="registrationForm.lastname.displayname"/&gt; <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-name&gt;mask&lt;/var-name&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-value&gt;^[a-zA-Z]*$&lt;/var-value&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/var&gt;<br>
          
          &nbsp;&nbsp;&nbsp;&nbsp; &lt;/field&gt;
          </p>
          
          <p>By default the arg0-arg3 elements will try to look up the key attribute in the 
          message resources.  If the resource attribute is set to false, it will pass in the 
          value directly without retrieving the value from the message resources.<BR>
          <BR>
          ex: &lt;field    property="integer" <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; depends="required,integer,range"&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg0 key="typeForm.integer.displayname"/&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg1 name="range" key="${var:min}" resource="false"/&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg2 name="range" key="${var:max}" resource="false"/&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-name&gt;min&lt;/var-name&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-value&gt;10&lt;/var-value&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-name&gt;max&lt;/var-name&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-value&gt;20&lt;/var-value&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp; &lt;/field&gt;<BR>
          </p>
          
          <H3>Constants/Variables</H3>
          <p>Global constants can be inside the global tags and FormSet/Locale constants can be created 
          in the formset tags.  Constants are currently only replaced in the Field's property attribute, 
          the Field's var element value attribute, the Field's msg element key attribute, 
          and Field's arg0-arg3 element's key attribute.  A Field's variables can also be 
          substituted in the arg0-arg3 elements (ex: ${var:min}).  The order of replacement is 
          FormSet/Locale constants are replaced first, Global constants second, and for the 
          arg elements variables are replaced last.<BR>
          ex: &lt;global&gt; <BR>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;constant name="zip" value="^\d{5}(-\d{4})?$" /&gt; <BR>
	  &nbsp;&nbsp;&nbsp;&nbsp; &lt;/global&gt; <BR>
          <BR>
          &nbsp;&nbsp;&nbsp;&nbsp; &lt;field    property="zip"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; depends="required,mask"&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg0 key="registrationForm.zippostal.displayname"/&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-name&gt;mask&lt;/var-name&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-value&gt;${zip}&lt;/var-value&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp; &lt;/field&gt;
          </p>
          
          
          <p>The var element under a field can be used to store variables for use by a pluggable 
          validator.  These variables are available through the Field's getVar(String key) method.<BR>
          &nbsp;&nbsp;&nbsp;ex: <BR>
          &nbsp;&nbsp;&nbsp;&nbsp; &lt;field    property="integer" <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; depends="required,integer,range"&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg0 key="typeForm.integer.displayname"/&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg1 name="range" key="${var:min}" resource="false"/&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arg2 name="range" key="${var:max}" resource="false"/&gt;<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-name&gt;min&lt;/var-name&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-value&gt;10&lt;/var-value&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-name&gt;max&lt;/var-name&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;var-value&gt;20&lt;/var-value&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/var&gt;<br>
          &nbsp;&nbsp;&nbsp;&nbsp; &lt;/field&gt;<BR>
          <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      <font size=-1><i>See type form's integer field in the example 
                                       web app for a working example.</i></font>
          </p>
          
          <H3>Pluggable Validators</H3>
          <p>Validation actions are read from the validation.xml file.  The default actions are 
          setup in the validation.xml file.  The ones currently configured are required, 
          mask ,byte, short, int, long, float, double, date (without locale support), 
          and a numeric range.  The 'mask' action depends on required in the default setup.  
          That means that 'required' has to successfully completed before 'mask' will run.  
          The 'required' and 'mask' action are partially built into the framework.  Any field that 
          isn't 'required' will skip other actions if the field is null or has a length of zero.  
          If the Javascript Validator JSP Tag is used, the client side Javascript generation looks 
          for a value in the validator's javascript attribute and generates an object that the 
          supplied method can use to validate the form.  For a more detailed explanation of how 
          the Javascript Validator Tag works, see the <a href="jsptags.html">JSP Tags</a> 
          section. 
          </p>
          
          <p>The 'mask' action let's you validate a regular expression mask to the field.  
          It uses the <a href="http://jakarta.apache.org/regexp">Regular Expression Package</a> 
          from the <a href="http://jakarta.apache.org">jakarta site</a>.  All validation rules 
          are stored in the validation.xml file.  The main class used is 
          <a href="http://jakarta.apache.org/regexp/apidocs/org/apache/regexp/RE.html">org.apache.regexp.RE</a>.  
          </p>

          <p>Example Validator Configuration from validation.xml.<BR>
          &nbsp;&nbsp;&nbsp;&lt;validator name="required"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classname="com.wintecinc.struts.validation.Validator"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method="validateRequired"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg="errors.required"/&gt;<BR>
          <BR>
          &nbsp;&nbsp;&nbsp;&lt;validator name="mask"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classname="com.wintecinc.struts.validation.Validator"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method="validateMask"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depends="required"<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg="errors.invalid"/&gt;<BR>
 	  </p>

          <H3>Creating Pluggable Validators</H3>
          <p>The ValidatorAction method needs to have the following signature.
          <BR>
          &nbsp;&nbsp;&nbsp;(java.lang.Object, <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;com.wintecinc.struts.validation.ValidatorAction, com.wintecinc.struts.validation.Field, <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;org.apache.struts.action.ActionErrors, , <BR>
          &nbsp;&nbsp;&nbsp;&nbsp;javax.servlet.http.HttpServletRequest, javax.servlet.ServletContext)<BR>
          <table>
          <tr><td><b>java.lang.Object</b></td><td>Bean validation is being performed on.</td></tr>
          <tr><td><b>com.wintecinc.struts.validation.ValidatorAction</b></td><td>The current ValidatorAction being performed.</td></tr>
          <tr><td><b>com.wintecinc.struts.validation.Field</b></td><td>Field object being validated.</td></tr>
          <tr><td><b>org.apache.struts.action.ActionErrors</b></td><td>The errors objects to add an ActionError to if the validation fails.</td></tr>
          <tr><td><b>javax.servlet.http.HttpServletRequest</b></td><td>Current request object.</td></tr>
          <tr><td><b>javax.servlet.ServletContext</b></td><td>The application's ServletContext.</td></tr>
          </table>
          </p>
          
          <H3>Multi Page Forms</H3>
          <p>The field element has an optional page attribute.  It can be set to an integer.  All validation 
          for the any field page value less than or equal to the current page is performed server side.  
          All validation for the any field page equal to the current page is generated for the client side 
          Javascript.  A mutli-part form expects the page attribute to be set.<BR>
          &nbsp;&nbsp;&nbsp;ex: &lt;html:hidden property="page" value="1"/&gt;
          </p>
       </td>
       <!-- / Body -->
    </tr>
  </table>
  
  
</body></html>

